---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/annotations/
    body:
      encoding: US-ASCII
      string: commit=Create%20Annotation&annotation[data]=%7B%22%40context%22%3A%22http%3A%2F%2Fiiif.io%2Fapi%2Fpresentation%2F2%2Fcontext.json%22%2C%22%40graph%22%3A%5B%7B%22%40id%22%3A%22_%3Ag70349699654640%22%2C%22%40type%22%3A%5B%22dctypes%3AText%22%2C%22cnt%3AContentAsText%22%5D%2C%22chars%22%3A%22I%20love%20this!%22%2C%22format%22%3A%22text%2Fplain%22%2C%22language%22%3A%22en%22%7D%2C%7B%22%40type%22%3A%22oa%3AAnnotation%22%2C%22motivation%22%3A%22oa%3Acommenting%22%2C%22on%22%3A%22http%3A%2F%2Fpurl.stanford.edu%2Fkq131cs7229%22%2C%22resource%22%3A%22_%3Ag70349699654640%22%7D%5D%7D
    headers:
      Accept:
      - application/ld+json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/x-www-form-urlencoded
      Content-Length:
      - '580'
      User-Agent:
      - Ruby
  response:
    status:
      code: 201
      message: 'Created '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/ld+json; charset=utf-8
      Etag:
      - W/"dcd825626062466f37ac0a5cf05785f5"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - a1401117-523e-4633-9860-3e901f8d40af
      X-Runtime:
      - '16.462703'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Mon, 11 May 2015 21:27:35 GMT
      Content-Length:
      - '443'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=L25HcXgvOUVtK1hvZDhKZDczVXY1aXUyUzJ5eWZuZjBCT2lsN2dXeTczQmxVNDZGbm5tcUVRTTdiM25XQWpoL0ZvWG9pRkhnd1dWTWN1WXMzNWFUcjV5dTE1RmlEL1RvK054di9qejBMM3hYQ3dmbU1KcnI1OHJnN3RrRUVzTzRDNXA5c2ptckxqYnliUlRkaUlYdmt5ck05MHFrc3hzMkcvTmwra0hjSTJTejFDb0laSUV6a1RWanhCUFJ4ZW1jVzF2NUh4TndadjFlSmpDaTRWdFlFZSt6UStlTkcwc2hTcUY5Si9URThweFZJMXpHUVBUMG50QnZGQXFoQ2VySC0tRnJSTmNYZWQ3a1VUNkdnWUJ0bkR5QT09--fa06edb8624f2b90a67981801be404adda29c76e;
        path=/; HttpOnly
      - request_method=POST; path=/
    body:
      encoding: UTF-8
      string: '{"@context":"http://www.w3.org/ns/oa-context-20130208.json","@graph":[{"@id":"_:g69902463073960","@type":["dctypes:Text","cnt:ContentAsText"],"chars":"I
        love this!","format":"text/plain","language":"en"},{"@id":"http://your.triannon-server.com/annotations/e9/9e/78/fb/e99e78fb-3260-4dee-a06f-b7f53b3e2f0d","@type":"oa:Annotation","hasBody":"_:g69902463073960","hasTarget":"http://purl.stanford.edu/kq131cs7229","motivatedBy":"oa:commenting"}]}'
    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:35 GMT
- request:
    method: get
    uri: http://www.w3.org/ns/oa-context-20130208.json
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json, application/json
      Accept-Encoding:
      - gzip, deflate
      User-Agent:
      - Ruby
  response:
    status:
      code: 307
      message: Temporary Redirect
    headers:
      Date:
      - Mon, 11 May 2015 21:27:35 GMT
      Server:
      - Apache/2
      Location:
      - http://www.w3.org/ns/oa.jsonld
      Cache-Control:
      - max-age=21600
      Expires:
      - Tue, 12 May 2015 03:27:35 GMT
      Content-Length:
      - '240'
      Content-Type:
      - text/html; charset=iso-8859-1
    body:
      encoding: UTF-8
      string: |
        <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
        <html><head>
        <title>307 Temporary Redirect</title>
        </head><body>
        <h1>Temporary Redirect</h1>
        <p>The document has moved <a href="http://www.w3.org/ns/oa.jsonld">here</a>.</p>
        </body></html>
    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:35 GMT
- request:
    method: get
    uri: http://www.w3.org/ns/oa.jsonld
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json, application/json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - ''
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 11 May 2015 21:27:35 GMT
      Server:
      - Apache/2
      Last-Modified:
      - Tue, 06 May 2014 11:14:49 GMT
      Etag:
      - '"b533-4f8b95b2a9c40"'
      Accept-Ranges:
      - bytes
      Content-Length:
      - '46387'
      Cache-Control:
      - max-age=21600
      Expires:
      - Tue, 12 May 2015 03:27:35 GMT
      P3p:
      - policyref="http://www.w3.org/2014/08/p3p.xml"
      Access-Control-Allow-Origin:
      - "*"
      Content-Type:
      - application/ld+json
    body:
      encoding: UTF-8
      string: |+
        {
          "@context": {
            "oa": "http://www.w3.org/ns/oa#",
            "cnt": "http://www.w3.org/2011/content#",
            "dc": "http://purl.org/dc/elements/1.1/",
            "dcterms": "http://purl.org/dc/terms/",
            "dctypes": "http://purl.org/dc/dcmitype/",
            "foaf": "http://xmlns.com/foaf/0.1/",
            "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
            "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
            "skos": "http://www.w3.org/2004/02/skos/core#",
            "owl": "http://www.w3.org/2002/07/owl#",
            "prov": "http://www.w3.org/ns/prov#",
            "trig": "http://www.w3.org/2004/03/trix/rdfg-1/",
            "xsd": "http://www.w3.org/2001/XMLSchema#",


            "hasBody" :         {"@type":"@id", "@id" : "oa:hasBody"},
            "hasTarget" :       {"@type":"@id", "@id" : "oa:hasTarget"},
            "hasSource" :       {"@type":"@id", "@id" : "oa:hasSource"},
            "hasSelector" :     {"@type":"@id", "@id" : "oa:hasSelector"},
            "hasState" :        {"@type":"@id", "@id" : "oa:hasState"},
            "hasScope" :        {"@type":"@id", "@id" : "oa:hasScope"},
            "annotatedBy" :  {"@type":"@id", "@id" : "oa:annotatedBy"},
            "serializedBy" : {"@type":"@id", "@id" : "oa:serializedBy"},
            "motivatedBy" :  {"@type":"@id", "@id" : "oa:motivatedBy"},
            "equivalentTo" : {"@type":"@id", "@id" : "oa:equivalentTo"},
            "styledBy" :     {"@type":"@id", "@id" : "oa:styledBy"},
            "cachedSource" : {"@type":"@id", "@id" : "oa:cachedSource"},
            "conformsTo" :   {"@type":"@id", "@id" : "dcterms:conformsTo"},
            "default" :      {"@type":"@id", "@id" : "oa:default"},
            "item" :         {"@type":"@id", "@id" : "oa:item"},
            "first":         {"@type":"@id", "@id" : "rdf:first"},
            "rest":          {"@type":"@id", "@id" : "rdf:rest", "@container" : "@list"},

            "annotatedAt" :  { "@type": "xsd:dateTimeStamp", "@id": "oa:annotatedAt" },
            "end" :          { "@type": "xsd:nonNegativeInteger", "@id": "oa:end" },
            "exact" :        "oa:exact",
            "prefix" :       "oa:prefix",
            "serializedAt" : { "@type": "xsd:dateTimeStamp", "@id": "oa:serializedAt" },
            "start" :        { "@type": "xsd:nonNegativeInteger", "@id": "oa:start" },
            "styleClass" :   "oa:styleClass",
            "suffix" :       "oa:suffix",
            "when" :         { "@type": "xsd:dateTimeStamp", "@id": "oa:when" },

            "chars" :        "cnt:chars",
            "bytes" :        "cnt:bytes",
            "format" :       "dc:format",
            "language" :     "dc:language",
            "value" :        "rdf:value",
            "label" :        "rdfs:label",
            "name" :         "foaf:name",
            "mbox" :         "foaf:mbox"

          },
          "@graph": [
            {
              "@id": "oa:annotatedBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The object of the relationship is a resource that identifies the agent responsible for creating the Annotation. This may be either a human or software agent. \n\nThere SHOULD be exactly 1 oa:annotatedBy relationship per Annotation, but MAY be 0 or more than 1, as the Annotation may be anonymous, or multiple agents may have worked together on it.\n\nIt is RECOMMENDED to use these and other FOAF terms to describe agents: foaf:Person, prov:SoftwareAgent, foaf:Organization, foaf:name, foaf:mbox, foaf:openid, foaf:homepage"
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "annotatedBy"
              },
              "rdfs:subPropertyOf": {
                "@id": "prov:wasAttributedTo"
              }
            },
            {
              "@id": "oa:commenting",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a commentary about or review of the target resource(s). For example to provide a commentary about a particular PDF."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "commenting"
              }
            },
            {
              "@id": "oa:SvgSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector which selects an area specified as an SVG shape.\n\nThe SVG document should either be retrievable by resolving the URI of this resource, or be included as an Embedded Resource using cnt:Content.\n\nIt is RECOMMENDED that the document contain only a single shape element and that element SHOULD be one of: path, rect, circle, ellipse, polyline, polygon or g. The g element SHOULD ONLY be used to construct a multi-element group, for example to define a donut shape requiring an outer circle and a clipped inner circle.\n\nThe dimensions of both the shape and the SVG canvas MUST be relative to the dimensions of the Source resource. For example, given an image which is 600 pixels by 400 pixels, and the desired section is a circle of 100 pixel radius at the center of the image, then the SVG element would be: <circle cx=\"300\" cy=\"200\" r=\"100\"/>\n\nIt is NOT RECOMMENDED to include style information within the SVG element, nor Javascript, animation, text or other non shape oriented information. Clients SHOULD ignore such information if present."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "SvgSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:Selector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes the segment of interest in a representation of a Source resource, indicated with oa:hasSelector from the Specific Resource. \n\nThis class is not used directly in Annotations, only its subclasses are.\n\nThe nature of the Selector will be dependent on the type of the representation for which the segment is conveyed. The specific type of selector should be indicated using a subclass of oa:Selector.\n\nThe Specifier's description MAY be conveyed as an external or embedded resource (cnt:Content), or as RDF properties within the graph. The description SHOULD use existing standards whenever possible. If the Specifier has an HTTP URI, then its description, and only its description, MUST be returned when the URI is dereferenced."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Selector"
              }
            },
            {
              "@id": "oa:Style",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes the style in which the selection or resource should be rendered, indicated with oa:styledBy from an oa:Annotation.\n\nThis class is not used directly in Annotations, only its subclasses are.\n\nThe content of the resource provides the rendering hints about the Annotation's constituent resources. \n\nThe Specifier's description MAY be conveyed as an external or embedded resource (cnt:Content), or as RDF properties within the graph. The description SHOULD use existing standards whenever possible. If the Specifier has an HTTP URI, then its description, and only its description, MUST be returned when the URI is dereferenced."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Style"
              }
            },
            {
              "@id": "oa:exact",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A copy of the text which is being selected, after normalization.\n\nSee oa:TextQuoteSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "exact"
              }
            },
            {
              "@id": "oa:hasBody",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between oa:Annotation and body. The body is somehow \"about\" the oa:hasTarget of the annotation.\n\nThe Body may be of any media type, and contain any type of content. The Body SHOULD be identified by HTTP URIs unless they are embedded within the Annotation.\n\nEmbedded bodies SHOULD be instances of cnt:ContentAsText and embed their content with cnt:chars. They SHOULD declare their media type with dc:format, and MAY indicate their language using dc:language and a RFC-3066 language tag. \n\nThere is no OA class provided for \"Body\" as a body might be a target of a different annotation. However, there SHOULD be 1 or more content-based classes associated with the body resources of an Annotation, and the dctypes: vocabulary is recommended for this purpose, for instance dctypes:Text to declare textual content.\n"
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasBody"
              }
            },
            {
              "@id": "oa:Choice",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A multiplicity construct that conveys to a consuming application that it should select one of the constituent resources to display to the user, and not render/use all of them. \n\noa:Choice can be used as the object of the object of the oa:hasBody, oa:hasTarget, oa:hasSelector, oa:hasState, oa:styledBy and oa:hasScope relationships, \n\nThere MUST be 1 or more oa:item relationships for each oa:Choice.\n\nThere SHOULD be exactly 1 default relationship for each Choice."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Choice"
              },
              "rdfs:subClassOf": {
                "@id": "rdf:Alt"
              }
            },
            {
              "@id": "oa:when",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The timestamp at which the Source resource should be interpreted for the Annotation, typically the time that the Annotation was created."
              },
              "rdfs:domain": {
                "@id": "oa:TimeState"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "when"
              },
              "rdfs:range": {
                "@id": "xsd:dateTimeStamp"
              }
            },
            {
              "@id": "oa:serializedBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The object of the relationship is the agent, likely software, responsible for generating the serialization of the Annotation's serialization. \n\nIt is RECOMMENDED to use these and other FOAF terms to describe agents: foaf:Person, prov:SoftwareAgent, foaf:Organization, foaf:name, foaf:mbox, foaf:openid, foaf:homepage\n\nThere MAY be 0 or more oa:serializedBy relationships per Annotation."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "serializedBy"
              },
              "rdfs:subPropertyOf": {
                "@id": "prov:wasAttributedTo"
              }
            },
            {
              "@id": "oa:motivatedBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between an Annotation and a Motivation, indicating the reasons why the Annotation was created.\n\nEach Annotation SHOULD have at least one oa:motivatedBy relationship, and MAY be more than 1."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "motivatedBy"
              },
              "rdfs:range": {
                "@id": "oa:Motivation"
              }
            },
            {
              "@id": "oa:moderating",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents an assignment of value or quality to the target resource(s). For example annotating an Annotation to moderate it up in a trust network or threaded discussion."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "moderating"
              }
            },
            {
              "@id": "oa:highlighting",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a highlighted section of the target resource or segment. For example to draw attention to the selected text that the annotator disagrees with. A Highlight may or may not have a Body resource"
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "highlighting"
              }
            },
            {
              "@id": "oa:styledBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:Annotation and a oa:Style.\n\nThere MAY be 0 or 1 styledBy relationships for each Annotation.\n\nIf there are multiple Style resources that must be associated with the Annotation, then the use of the Multiplicity Constructs oa:Choice, oa:Composite or oa:List is RECOMMENDED."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "styledBy"
              },
              "rdfs:range": {
                "@id": "oa:Style"
              }
            },
            {
              "@id": "oa:FragmentSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector which describes the segment of interest in a representation, through the use of the fragment identifier component of a URI.\n\nIt is RECOMMENDED to use oa:FragmentSelector as the selector on a Specific Resource rather than annotating the fragment URI directly, in order to improve discoverability of annotation on the Source.\n\nThe oa:FragmentSelector MUST have exactly 1 rdf:value property, containing the fragment identifier component of a URI that describes the segment of interest in the resource, excluding the initial \"#\".\n\nThe Fragment Selector SHOULD have a dcterms:conformsTo relationship with the object being the specification that defines the syntax of the fragment, for instance <http://tools.ietf.org/rfc/rfc3236> for HTML fragments. "
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "FragmentSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:SpecificResource",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource identifies part of another Source resource, a particular representation of a resource, a resource with styling hints for renders, or any combination of these. \n\nThe Specific Resource takes the role of oa:hasBody or oa:hasTarget in an oa:Annotation instead of the Source resource.\n\nThere MUST be exactly 1 oa:hasSource relationship associated with a Specific Resource.\n\nThere MUST be exactly 0 or 1 oa:hasSelector relationship associated with a Specific Resource.\n\nThere MAY be 0 or 1 oa:hasState relationship for each Specific Resource.\n\nIf the Specific Resource has an HTTP URI, then the exact segment of the Source resource that it identifies, and only the segment, MUST be returned when the URI is dereferenced. For example, if the segment of interest is a region of an image and the Specific Resource has an HTTP URI, then dereferencing it MUST return the selected region of the image as it was at the time when the annotation was created. Typically this would be a burden to support, and thus the Specific Resource SHOULD be identified by a globally unique URI, such as a UUID URN. If it is not considered important to allow other Annotations or systems to refer to the Specific Resource, then a blank node MAY be used instead."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "SpecificResource"
              }
            },
            {
              "@id": "oa:annotatedAt",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The time at which the Annotation was created. \n\nThere SHOULD be exactly 1 oa:annotatedAt property per Annotation, and MUST NOT be more than 1. The datetime MUST be expressed in the xsd:dateTime format, and SHOULD have a timezone specified."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "annotatedAt"
              },
              "rdfs:range": {
                "@id": "xsd:dateTimeStamp"
              }
            },
            {
              "@id": "oa:editing",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a request for a modification or edit to the target resource. For example, an Annotation that requests a typo to be corrected."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "editing"
              }
            },
            {
              "@id": "oa:Annotation",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "Typically an Annotation has a single Body (oa:hasBody), which is the comment or other descriptive resource, and a single Target (oa:hasTarget) that the Body is somehow \"about\". The Body provides the information which is annotating the Target. \n\nThis \"aboutness\" may be further clarified or extended to notions such as classifying or identifying with oa:motivatedBy."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Annotation"
              }
            },
            {
              "@id": "oa:equivalentTo",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The subject and object resources of the oa:equivalentTo relationship represent the same resource, but potentially have different metadata such as oa:serializedBy, oa:serializedAt and serialization format.  oa:equivalentTo is a symmetrical and transitive relationship; if A oa:equivalentTo B, then it is also true that B oa:equivalent A; and that if B oa:equivalentTo C, then it is also true that A oa:equivalentTo C. \n\nThe Annotation MAY include 0 or more instances of the oa:equivalentTo relationship between copies of the Annotation or other resources, and SHOULD include as many as are available.\n\nIf a system publishes an embedded resource (a cnt:Content) at a new HTTP URI, then it SHOULD express the oa:equivalentTo relationship between the resource's URN and the new URI from which it is available."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "equivalentTo"
              },
              "rdfs:subPropertyOf": {
                "@id": "prov:alternateOf"
              }
            },
            {
              "@id": "oa:Motivation",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The Motivation for creating an Annotation, indicated with oa:motivatedBy, is a reason for its creation, and might include things like oa:replying to another annotation, oa:commenting on a resource, or oa:linking to a related resource.\n\nEach Annotation SHOULD have at least one oa:motivatedBy relationship to an instance of oa:Motivation, which is a subClass of skos:Concept."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Motivation"
              },
              "rdfs:subClassOf": {
                "@id": "skos:Concept"
              }
            },
            {
              "@id": "oa:tagging",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents adding a Tag on the target resource(s). One or more of the bodies of the annotation should be typed as a oa:Tag or oa:SemanticTag."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "tagging"
              }
            },
            {
              "@id": "oa:List",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A multiplicity construct that conveys to a consuming application that all of the constituent resources are required for the Annotation to be correctly interpreted, and in a particular order. \n\noa:List can be used as the object of the object of the oa:hasBody, oa:hasTarget, oa:hasSelector, oa:hasState, oa:styledBy and oa:hasScope relationships, \n\nThere MUST be 2 or more oa:item relationships for each oa:List, with their order defined using the rdf:List construct of rdf:first/rdf:rest/rdf:nil.\n\nAll the elements of the list should also be declared using oa:item, and each of the oa:items should appear at least once in the list."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "List"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Composite"
              }
            },
            {
              "@id": "oa:TextQuoteSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector that describes a textual segment by means of quoting it, plus passages before or after it.\n\nFor example, if the document were \"abcdefghijklmnopqrstuvwxyz\", one could select \"efg\" by a oa:prefix of \"abcd\", the quotation of oa:exact \"efg\" and a oa:suffix of \"hijk\".\n\nThe text MUST be normalized before recording.\n\nEach TextQuoteSelector MUST have exactly 1 oa:exact property.\n\nEach TextQuoteSelector SHOULD have exactly 1 oa:prefix property, and MUST NOT have more than 1.\n\nEach TextQuoteSelector SHOULD have exactly 1 oa:suffix property, and MUST NOT have more than 1."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "TextQuoteSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:cachedSource",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A link to a copy of the Source resource's representation appropriate for the Annotation, typically a copy of the original at the time that the Annotation was created"
              },
              "rdfs:domain": {
                "@id": "oa:TimeState"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "cachedSource"
              }
            },
            {
              "@id": "oa:bookmarking",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents the creation of a bookmark to the target resources or recorded point or points within one or more resources. For example, an Annotation that bookmarks the point in a text where the reader finished reading. Bookmark Annotations may or may not have a Body resource."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "bookmarking"
              }
            },
            {
              "@id": "oa:SemanticTag",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A class assigned to the Body when it is a semantic tagging resource; a URI that identifies a concept, rather than an embedded string, frequently a term from a controlled vocabulary.\n\nIt is NOT RECOMMENDED to use the URI of a document as a Semantic Tag, as it might also be used as a regular Body in other Annotations which would inherit the oa:SemanticTag class assignment. Instead it is more appropriate to create a new URI and link it to the document, using the foaf:page predicate."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "SemanticTag"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Tag"
              }
            },
            {
              "@id": "oa:hasSource",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:SpecificResource and the resource that it is a more specific representation of. \n\nThere MUST be exactly 1 oa:hasSource relationship associated with a Specific Resource."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasSource"
              }
            },
            {
              "@id": "oa:default",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The constituent resource of a oa:Choice to use as a default option, if there is no other means to determine which would be most appropriate.\n\nThere SHOULD be exactly 1 default relationship for each Choice."
              },
              "rdfs:domain": {
                "@id": "oa:Choice"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "default"
              },
              "rdfs:subPropertyOf": {
                "@id": "oa:item"
              }
            },
            {
              "@id": "oa:hasSelector",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:SpecificResource and a oa:Selector.\n\nThere MUST be exactly 0 or 1 oa:hasSelector relationship associated with a \nSpecific Resource. \n\nIf multiple Selectors are required, either to express a choice between different optional, equivalent selectors, or a chain of selectors that should all be processed, it is necessary to use oa:Choice, oa:Composite or oa:List as a selector."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasSelector"
              },
              "rdfs:range": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:hasTarget",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between oa:Annotation and target. The target resource is what the oa:hasBody is somewhat \"about\".\n\nThe target may be of any media type, and contain any type of content. The target SHOULD be identified by HTTP URIs unless they are embedded within the Annotation.\n\nEmbedded targets SHOULD be instances of cnt:ContentAsText and embed their content with cnt:chars. They SHOULD declare their media type with dc:format, and MAY indicate their language using dc:language and a RFC-3066 language tag. \n\nThere is no OA class provided for \"Target\" as a target might be a body in a different annotation. However, there SHOULD be 1 or more content-based classes associated with the target resources of an Annotation, and the dctypes: vocabulary is recommended for this purpose, for instance dctypes:Text to declare textual content."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasTarget"
              }
            },
            {
              "@id": "oa:TextPositionSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "An oa:Selector which describes a range of text based on its start and end positions.\n\nThe text MUST be normalized before counting characters. For a Selector that works from the bitstream rather than the rendered characters, see oa:DataPositionSelector.\n\nEach oa:TextPositionSelector MUST have exactly 1 oa:start property.\n\nEach oa:TextPositionSelector MUST have exactly 1 oa:end property."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "TextPositionSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:serializedAt",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The time at which the agent referenced by oa:serializedBy generated the first serialization of the Annotation, and any subsequent substantially different one. The annotation graph MUST have changed for this property to be updated, and as such represents the last modified datestamp for the Annotation. This might be used to determine if it should be re-imported into a triplestore when discovered. \n\nThere MAY be exactly 1 oa:serializedAt property per Annotation, and MUST NOT be more than 1. The datetime MUST be expressed in the xsd:dateTime format, and SHOULD have a timezone specified.\n"
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "serializedAt"
              },
              "rdfs:range": {
                "@id": "xsd:dateTimeStamp"
              }
            },
            {
              "@id": "oa:Composite",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A multiplicity construct that conveys to a consuming application that all of the constituent resources are required for the Annotation to be correctly interpreted. \n\noa:Composite can be used as the object of the object of the oa:hasBody, oa:hasTarget, oa:hasSelector, oa:hasState, oa:styledBy and oa:hasScope relationships, \n\nThere MUST be 2 or more oa:item relationships for each oa:Composite."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": "Composite",
              "rdfs:subClassOf": {
                "@id": "rdf:Bag"
              }
            },
            {
              "@id": "oa:classifying",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents the assignment of a classification type, typically from a controlled vocabulary, to the target resource(s). For example to classify an Image resource as a Portrait."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "classifying"
              }
            },
            {
              "@id": "oa:identifying",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents the assignment of an identity to the target resource(s). For example, annotating the name of a city in a string of text with the URI that identifies it."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "identifying"
              }
            },
            {
              "@id": "oa:HttpRequestState",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes how to retrieve an appropriate representation of the Source resource for the Annotation, based on the HTTP Request headers to send to the server.\n\nThere MUST be exactly 1 rdf:value property per HttpRequestState, containing HTTP request headers as a single, complete string, exactly as they would appear in an HTTP request. "
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "HttpRequestState"
              },
              "rdfs:subClassOf": {
                "@id": "oa:State"
              }
            },
            {
              "@id": "oa:DataPositionSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector which describes a range of data based on its start and end positions within the byte stream of the representation.\n\nEach DataPositionSelector MUST have exactly 1 oa:start property.\n\nEach TextPositionSelector MUST have exactly 1 oa:end property.\n\nSee oa:TextPositionSelector for selection at normalized character level rather than bytestream level."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "DataPositionSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:linking",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents an untyped link to a resource related to the target."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "linking"
              }
            },
            {
              "@id": "oa:motivationScheme",
              "@type": [
                "skos:ConceptScheme",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The concept scheme for Open Annotation Motivations"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "motivationScheme"
              }
            },
            {
              "@id": "oa:replying",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a reply to a previous statement, either an Annotation or another resource. For example providing the assistance requested in the above."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "replying"
              }
            },
            {
              "@id": "oa:start",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The starting position of the segment of text or bytes. The first character/byte in the full text/stream is position 0. The character/byte indicated at position oa:start is included within the selected segment. \n\nSee oa:DataPositionSelector and oa:TextPositionSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "start"
              },
              "rdfs:range": {
                "@id": "xsd:nonNegativeInteger"
              }
            },
            {
              "@id": "oa:end",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The end position of the segment of text or bytes. The first character/byte in the full text/stream is position 0. The character/byte indicated at position oa:end is NOT included within the selected segment. \n\nSee oa:DataPositionSelector and oa:oa:TextPositionSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "end"
              },
              "rdfs:range": {
                "@id": "xsd:nonNegativeInteger"
              }
            },
            {
              "@id": "oa:TimeState",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes how to retrieve a representation of the Source resource that is temporally appropriate for the Annotation.\n\nThere MUST be at least one of oa:cachedSource or oa:when specified. If there is more than 1, each gives an alternative copy of the representation."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "TimeState"
              },
              "rdfs:subClassOf": {
                "@id": "oa:State"
              }
            },
            {
              "@id": "oa:State",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes how to retrieve an appropriate representation of the Source resource, indicated with oa:hasState from the Specific Resource.\n\nThis class is not used directly in Annotations, only its subclasses are.\n\nThe Specifier's description MAY be conveyed as an external or embedded resource (cnt:Content), or as RDF properties within the graph. The description SHOULD use existing standards whenever possible. If the Specifier has an HTTP URI, then its description, and only its description, MUST be returned when the URI is dereferenced."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "State"
              }
            },
            {
              "@id": "oa:CssStyle",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes styles for resources participating in the Annotation using CSS.\n\nSpecific Resources MAY be assigned a CSS style class using oa:styleClass.\n\nThe CSS resource MAY have its own dereferencable URI that provides the information. For example, \"Style1\" in the diagram below might actually have the URI \"http://www.example.com/styles/annotations.css\". It MAY be embedded within the Annotation using the inline constructions described in Embedding Resources."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "CssStyle"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Style"
              }
            },
            {
              "@id": "oa:item",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a multiplicity construct node and its constituent resources.\n\nThere MUST be 1 or more item relationships for each multiplicity construct oa:Choice, oa:Composite and oa:List."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "item"
              },
              "rdfs:subPropertyOf": {
                "@id": "rdfs:member"
              }
            },
            {
              "@id": "oa:hasScope",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a Specific Resource and the resource that provides the scope or context for it in this Annotation.\n\nThere MAY be 0 or more hasScope relationships for each Specific Resource."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasScope"
              }
            },
            {
              "@id": "oa:suffix",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The snippet of text that occurs immediately after the text which is being selected. \n\nSee oa:TextQuoteSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "suffix"
              }
            },
            {
              "@id": "oa:hasState",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:SpecificResource and a oa:State resource.\n\nThere MAY be 0 or 1 oa:hasState relationship for each SpecificResource.\n\nIf there are multiple State resources that must be associated with the specific resource, then the use of the Multiplicity Constructs oa:Choice, oa:Composite or oa:List is RECOMMENDED."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasState"
              },
              "rdfs:range": {
                "@id": "oa:State"
              }
            },
            {
              "@id": "oa:",
              "@type": "owl:Ontology",
              "dc:contributor": {
                "@language": "en",
                "@value": "Stian Soiland-Reyes"
              },
              "dc:creator": [
                {
                  "@language": "en",
                  "@value": "Robert Sanderson"
                },
                {
                  "@language": "it",
                  "@value": "Paolo Ciccarese"
                },
                {
                  "@language": "vls",
                  "@value": "Herbert Van de Sompel"
                }
              ],
              "dc:description": {
                "@language": "en",
                "@value": "The Open Annotation Core Data Model specifies an interoperable framework for creating associations between related resources, annotations, using a methodology that conforms to the Architecture of the World Wide Web. Open Annotations can easily be shared between platforms, with sufficient richness of expression to satisfy complex requirements while remaining simple enough to also allow for the most common use cases, such as attaching a piece of text to a single web resource.\n\nAn Annotation is considered to be a set of connected resources, typically including a body and target, where the body is somehow about the target. The full model supports additional functionality, enabling semantic annotations, embedding content, selecting segments of resources, choosing the appropriate representation of a resource and providing styling hints for consuming clients."
              },
              "dc:title": {
                "@language": "en",
                "@value": "Open Annotation Data Model"
              },
              "dcterms:modified": {
                "@type": "xsd:dateTime",
                "@value": "2013-02-22T21:40:51+01:00"
              },
              "owl:versionIRI": {
                "@id": "http://www.openannotation.org/spec/core/20130208/oa.owl"
              },
              "owl:versionInfo": "0.9.20130208",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The Open Annotation Core Data Model specifies an interoperable framework for creating associations between related resources, annotations, using a methodology that conforms to the Architecture of the World Wide Web.\n\nThis ontology is a non-normative OWL formalization of the textual OA specification at http://www.openannotation.org/spec/core/20130208/index.html\n\nNote that OWL imports are disabled in the published version in order to reduce external implications, improve OWL 2 Profile conformity and increase interoperability. Some OWL tools might thus misleadingly show this ontology as (re)defining properties like skos:prefLabel."
              },
              "rdfs:seeAlso": {
                "@id": "http://www.openannotation.org/spec/core/20130208/index.html"
              }
            },
            {
              "@id": "oa:questioning",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents asking a question about the target resource(s). For example to ask for assistance with a particular section of text, or question its veracity."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "questioning"
              }
            },
            {
              "@id": "oa:describing",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a description of the target resource(s), as opposed to a comment about them. For example describing the above PDF's contents, rather than commenting on their accuracy."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "describing"
              }
            },
            {
              "@id": "oa:styleClass",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The string name of the class used in the CSS description that should be applied to the Specific Resource.\n\nThere MAY be 0 or more styleClass properties on a Specific Resource.\n\nSee oa:CssStyle."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "styleClass"
              }
            },
            {
              "@id": "oa:Tag",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A class assigned to the Body when it is a tag, such as a embedded text string with cnt:chars.\n\nTags are typically keywords or labels, and used for organization, description or discovery of the resource being tagged. In the Semantic Web, URIs are used instead of strings to avoid the issue of polysemy where one word has multiple meanings, such usage MUST be indicated using the subclass oa:SemanticTag.\n\nAnnotations that tag resources, either with text or semantic tags, SHOULD also have the oa:tagging motivation to make the reason for the Annotation more clear to applications, and MAY have other motivations as well."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Tag"
              }
            },
            {
              "@id": "oa:prefix",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A snippet of text that occurs immediately before the text which is being selected.\n\nSee oa:TextQuoteSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "prefix"
              }
            }
          ]
        }


    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:36 GMT
- request:
    method: get
    uri: http://www.w3.org/ns/oa-context-20130208.json
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json, application/json
      Accept-Encoding:
      - gzip, deflate
      User-Agent:
      - Ruby
  response:
    status:
      code: 307
      message: Temporary Redirect
    headers:
      Date:
      - Mon, 11 May 2015 21:27:36 GMT
      Server:
      - Apache/2
      Location:
      - http://www.w3.org/ns/oa.jsonld
      Cache-Control:
      - max-age=21600
      Expires:
      - Tue, 12 May 2015 03:27:36 GMT
      Content-Length:
      - '240'
      Content-Type:
      - text/html; charset=iso-8859-1
    body:
      encoding: UTF-8
      string: |
        <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
        <html><head>
        <title>307 Temporary Redirect</title>
        </head><body>
        <h1>Temporary Redirect</h1>
        <p>The document has moved <a href="http://www.w3.org/ns/oa.jsonld">here</a>.</p>
        </body></html>
    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:36 GMT
- request:
    method: get
    uri: http://www.w3.org/ns/oa.jsonld
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json, application/json
      Accept-Encoding:
      - gzip, deflate
      Cookie:
      - ''
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 11 May 2015 21:27:36 GMT
      Server:
      - Apache/2
      Last-Modified:
      - Tue, 06 May 2014 11:14:49 GMT
      Etag:
      - '"b533-4f8b95b2a9c40"'
      Accept-Ranges:
      - bytes
      Content-Length:
      - '46387'
      Cache-Control:
      - max-age=21600
      Expires:
      - Tue, 12 May 2015 03:27:36 GMT
      P3p:
      - policyref="http://www.w3.org/2014/08/p3p.xml"
      Access-Control-Allow-Origin:
      - "*"
      Content-Type:
      - application/ld+json
    body:
      encoding: UTF-8
      string: |+
        {
          "@context": {
            "oa": "http://www.w3.org/ns/oa#",
            "cnt": "http://www.w3.org/2011/content#",
            "dc": "http://purl.org/dc/elements/1.1/",
            "dcterms": "http://purl.org/dc/terms/",
            "dctypes": "http://purl.org/dc/dcmitype/",
            "foaf": "http://xmlns.com/foaf/0.1/",
            "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
            "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
            "skos": "http://www.w3.org/2004/02/skos/core#",
            "owl": "http://www.w3.org/2002/07/owl#",
            "prov": "http://www.w3.org/ns/prov#",
            "trig": "http://www.w3.org/2004/03/trix/rdfg-1/",
            "xsd": "http://www.w3.org/2001/XMLSchema#",


            "hasBody" :         {"@type":"@id", "@id" : "oa:hasBody"},
            "hasTarget" :       {"@type":"@id", "@id" : "oa:hasTarget"},
            "hasSource" :       {"@type":"@id", "@id" : "oa:hasSource"},
            "hasSelector" :     {"@type":"@id", "@id" : "oa:hasSelector"},
            "hasState" :        {"@type":"@id", "@id" : "oa:hasState"},
            "hasScope" :        {"@type":"@id", "@id" : "oa:hasScope"},
            "annotatedBy" :  {"@type":"@id", "@id" : "oa:annotatedBy"},
            "serializedBy" : {"@type":"@id", "@id" : "oa:serializedBy"},
            "motivatedBy" :  {"@type":"@id", "@id" : "oa:motivatedBy"},
            "equivalentTo" : {"@type":"@id", "@id" : "oa:equivalentTo"},
            "styledBy" :     {"@type":"@id", "@id" : "oa:styledBy"},
            "cachedSource" : {"@type":"@id", "@id" : "oa:cachedSource"},
            "conformsTo" :   {"@type":"@id", "@id" : "dcterms:conformsTo"},
            "default" :      {"@type":"@id", "@id" : "oa:default"},
            "item" :         {"@type":"@id", "@id" : "oa:item"},
            "first":         {"@type":"@id", "@id" : "rdf:first"},
            "rest":          {"@type":"@id", "@id" : "rdf:rest", "@container" : "@list"},

            "annotatedAt" :  { "@type": "xsd:dateTimeStamp", "@id": "oa:annotatedAt" },
            "end" :          { "@type": "xsd:nonNegativeInteger", "@id": "oa:end" },
            "exact" :        "oa:exact",
            "prefix" :       "oa:prefix",
            "serializedAt" : { "@type": "xsd:dateTimeStamp", "@id": "oa:serializedAt" },
            "start" :        { "@type": "xsd:nonNegativeInteger", "@id": "oa:start" },
            "styleClass" :   "oa:styleClass",
            "suffix" :       "oa:suffix",
            "when" :         { "@type": "xsd:dateTimeStamp", "@id": "oa:when" },

            "chars" :        "cnt:chars",
            "bytes" :        "cnt:bytes",
            "format" :       "dc:format",
            "language" :     "dc:language",
            "value" :        "rdf:value",
            "label" :        "rdfs:label",
            "name" :         "foaf:name",
            "mbox" :         "foaf:mbox"

          },
          "@graph": [
            {
              "@id": "oa:annotatedBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The object of the relationship is a resource that identifies the agent responsible for creating the Annotation. This may be either a human or software agent. \n\nThere SHOULD be exactly 1 oa:annotatedBy relationship per Annotation, but MAY be 0 or more than 1, as the Annotation may be anonymous, or multiple agents may have worked together on it.\n\nIt is RECOMMENDED to use these and other FOAF terms to describe agents: foaf:Person, prov:SoftwareAgent, foaf:Organization, foaf:name, foaf:mbox, foaf:openid, foaf:homepage"
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "annotatedBy"
              },
              "rdfs:subPropertyOf": {
                "@id": "prov:wasAttributedTo"
              }
            },
            {
              "@id": "oa:commenting",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a commentary about or review of the target resource(s). For example to provide a commentary about a particular PDF."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "commenting"
              }
            },
            {
              "@id": "oa:SvgSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector which selects an area specified as an SVG shape.\n\nThe SVG document should either be retrievable by resolving the URI of this resource, or be included as an Embedded Resource using cnt:Content.\n\nIt is RECOMMENDED that the document contain only a single shape element and that element SHOULD be one of: path, rect, circle, ellipse, polyline, polygon or g. The g element SHOULD ONLY be used to construct a multi-element group, for example to define a donut shape requiring an outer circle and a clipped inner circle.\n\nThe dimensions of both the shape and the SVG canvas MUST be relative to the dimensions of the Source resource. For example, given an image which is 600 pixels by 400 pixels, and the desired section is a circle of 100 pixel radius at the center of the image, then the SVG element would be: <circle cx=\"300\" cy=\"200\" r=\"100\"/>\n\nIt is NOT RECOMMENDED to include style information within the SVG element, nor Javascript, animation, text or other non shape oriented information. Clients SHOULD ignore such information if present."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "SvgSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:Selector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes the segment of interest in a representation of a Source resource, indicated with oa:hasSelector from the Specific Resource. \n\nThis class is not used directly in Annotations, only its subclasses are.\n\nThe nature of the Selector will be dependent on the type of the representation for which the segment is conveyed. The specific type of selector should be indicated using a subclass of oa:Selector.\n\nThe Specifier's description MAY be conveyed as an external or embedded resource (cnt:Content), or as RDF properties within the graph. The description SHOULD use existing standards whenever possible. If the Specifier has an HTTP URI, then its description, and only its description, MUST be returned when the URI is dereferenced."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Selector"
              }
            },
            {
              "@id": "oa:Style",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes the style in which the selection or resource should be rendered, indicated with oa:styledBy from an oa:Annotation.\n\nThis class is not used directly in Annotations, only its subclasses are.\n\nThe content of the resource provides the rendering hints about the Annotation's constituent resources. \n\nThe Specifier's description MAY be conveyed as an external or embedded resource (cnt:Content), or as RDF properties within the graph. The description SHOULD use existing standards whenever possible. If the Specifier has an HTTP URI, then its description, and only its description, MUST be returned when the URI is dereferenced."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Style"
              }
            },
            {
              "@id": "oa:exact",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A copy of the text which is being selected, after normalization.\n\nSee oa:TextQuoteSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "exact"
              }
            },
            {
              "@id": "oa:hasBody",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between oa:Annotation and body. The body is somehow \"about\" the oa:hasTarget of the annotation.\n\nThe Body may be of any media type, and contain any type of content. The Body SHOULD be identified by HTTP URIs unless they are embedded within the Annotation.\n\nEmbedded bodies SHOULD be instances of cnt:ContentAsText and embed their content with cnt:chars. They SHOULD declare their media type with dc:format, and MAY indicate their language using dc:language and a RFC-3066 language tag. \n\nThere is no OA class provided for \"Body\" as a body might be a target of a different annotation. However, there SHOULD be 1 or more content-based classes associated with the body resources of an Annotation, and the dctypes: vocabulary is recommended for this purpose, for instance dctypes:Text to declare textual content.\n"
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasBody"
              }
            },
            {
              "@id": "oa:Choice",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A multiplicity construct that conveys to a consuming application that it should select one of the constituent resources to display to the user, and not render/use all of them. \n\noa:Choice can be used as the object of the object of the oa:hasBody, oa:hasTarget, oa:hasSelector, oa:hasState, oa:styledBy and oa:hasScope relationships, \n\nThere MUST be 1 or more oa:item relationships for each oa:Choice.\n\nThere SHOULD be exactly 1 default relationship for each Choice."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Choice"
              },
              "rdfs:subClassOf": {
                "@id": "rdf:Alt"
              }
            },
            {
              "@id": "oa:when",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The timestamp at which the Source resource should be interpreted for the Annotation, typically the time that the Annotation was created."
              },
              "rdfs:domain": {
                "@id": "oa:TimeState"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "when"
              },
              "rdfs:range": {
                "@id": "xsd:dateTimeStamp"
              }
            },
            {
              "@id": "oa:serializedBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The object of the relationship is the agent, likely software, responsible for generating the serialization of the Annotation's serialization. \n\nIt is RECOMMENDED to use these and other FOAF terms to describe agents: foaf:Person, prov:SoftwareAgent, foaf:Organization, foaf:name, foaf:mbox, foaf:openid, foaf:homepage\n\nThere MAY be 0 or more oa:serializedBy relationships per Annotation."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "serializedBy"
              },
              "rdfs:subPropertyOf": {
                "@id": "prov:wasAttributedTo"
              }
            },
            {
              "@id": "oa:motivatedBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between an Annotation and a Motivation, indicating the reasons why the Annotation was created.\n\nEach Annotation SHOULD have at least one oa:motivatedBy relationship, and MAY be more than 1."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "motivatedBy"
              },
              "rdfs:range": {
                "@id": "oa:Motivation"
              }
            },
            {
              "@id": "oa:moderating",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents an assignment of value or quality to the target resource(s). For example annotating an Annotation to moderate it up in a trust network or threaded discussion."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "moderating"
              }
            },
            {
              "@id": "oa:highlighting",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a highlighted section of the target resource or segment. For example to draw attention to the selected text that the annotator disagrees with. A Highlight may or may not have a Body resource"
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "highlighting"
              }
            },
            {
              "@id": "oa:styledBy",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:Annotation and a oa:Style.\n\nThere MAY be 0 or 1 styledBy relationships for each Annotation.\n\nIf there are multiple Style resources that must be associated with the Annotation, then the use of the Multiplicity Constructs oa:Choice, oa:Composite or oa:List is RECOMMENDED."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "styledBy"
              },
              "rdfs:range": {
                "@id": "oa:Style"
              }
            },
            {
              "@id": "oa:FragmentSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector which describes the segment of interest in a representation, through the use of the fragment identifier component of a URI.\n\nIt is RECOMMENDED to use oa:FragmentSelector as the selector on a Specific Resource rather than annotating the fragment URI directly, in order to improve discoverability of annotation on the Source.\n\nThe oa:FragmentSelector MUST have exactly 1 rdf:value property, containing the fragment identifier component of a URI that describes the segment of interest in the resource, excluding the initial \"#\".\n\nThe Fragment Selector SHOULD have a dcterms:conformsTo relationship with the object being the specification that defines the syntax of the fragment, for instance <http://tools.ietf.org/rfc/rfc3236> for HTML fragments. "
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "FragmentSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:SpecificResource",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource identifies part of another Source resource, a particular representation of a resource, a resource with styling hints for renders, or any combination of these. \n\nThe Specific Resource takes the role of oa:hasBody or oa:hasTarget in an oa:Annotation instead of the Source resource.\n\nThere MUST be exactly 1 oa:hasSource relationship associated with a Specific Resource.\n\nThere MUST be exactly 0 or 1 oa:hasSelector relationship associated with a Specific Resource.\n\nThere MAY be 0 or 1 oa:hasState relationship for each Specific Resource.\n\nIf the Specific Resource has an HTTP URI, then the exact segment of the Source resource that it identifies, and only the segment, MUST be returned when the URI is dereferenced. For example, if the segment of interest is a region of an image and the Specific Resource has an HTTP URI, then dereferencing it MUST return the selected region of the image as it was at the time when the annotation was created. Typically this would be a burden to support, and thus the Specific Resource SHOULD be identified by a globally unique URI, such as a UUID URN. If it is not considered important to allow other Annotations or systems to refer to the Specific Resource, then a blank node MAY be used instead."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "SpecificResource"
              }
            },
            {
              "@id": "oa:annotatedAt",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The time at which the Annotation was created. \n\nThere SHOULD be exactly 1 oa:annotatedAt property per Annotation, and MUST NOT be more than 1. The datetime MUST be expressed in the xsd:dateTime format, and SHOULD have a timezone specified."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "annotatedAt"
              },
              "rdfs:range": {
                "@id": "xsd:dateTimeStamp"
              }
            },
            {
              "@id": "oa:editing",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a request for a modification or edit to the target resource. For example, an Annotation that requests a typo to be corrected."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "editing"
              }
            },
            {
              "@id": "oa:Annotation",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "Typically an Annotation has a single Body (oa:hasBody), which is the comment or other descriptive resource, and a single Target (oa:hasTarget) that the Body is somehow \"about\". The Body provides the information which is annotating the Target. \n\nThis \"aboutness\" may be further clarified or extended to notions such as classifying or identifying with oa:motivatedBy."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Annotation"
              }
            },
            {
              "@id": "oa:equivalentTo",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The subject and object resources of the oa:equivalentTo relationship represent the same resource, but potentially have different metadata such as oa:serializedBy, oa:serializedAt and serialization format.  oa:equivalentTo is a symmetrical and transitive relationship; if A oa:equivalentTo B, then it is also true that B oa:equivalent A; and that if B oa:equivalentTo C, then it is also true that A oa:equivalentTo C. \n\nThe Annotation MAY include 0 or more instances of the oa:equivalentTo relationship between copies of the Annotation or other resources, and SHOULD include as many as are available.\n\nIf a system publishes an embedded resource (a cnt:Content) at a new HTTP URI, then it SHOULD express the oa:equivalentTo relationship between the resource's URN and the new URI from which it is available."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "equivalentTo"
              },
              "rdfs:subPropertyOf": {
                "@id": "prov:alternateOf"
              }
            },
            {
              "@id": "oa:Motivation",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The Motivation for creating an Annotation, indicated with oa:motivatedBy, is a reason for its creation, and might include things like oa:replying to another annotation, oa:commenting on a resource, or oa:linking to a related resource.\n\nEach Annotation SHOULD have at least one oa:motivatedBy relationship to an instance of oa:Motivation, which is a subClass of skos:Concept."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Motivation"
              },
              "rdfs:subClassOf": {
                "@id": "skos:Concept"
              }
            },
            {
              "@id": "oa:tagging",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents adding a Tag on the target resource(s). One or more of the bodies of the annotation should be typed as a oa:Tag or oa:SemanticTag."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "tagging"
              }
            },
            {
              "@id": "oa:List",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A multiplicity construct that conveys to a consuming application that all of the constituent resources are required for the Annotation to be correctly interpreted, and in a particular order. \n\noa:List can be used as the object of the object of the oa:hasBody, oa:hasTarget, oa:hasSelector, oa:hasState, oa:styledBy and oa:hasScope relationships, \n\nThere MUST be 2 or more oa:item relationships for each oa:List, with their order defined using the rdf:List construct of rdf:first/rdf:rest/rdf:nil.\n\nAll the elements of the list should also be declared using oa:item, and each of the oa:items should appear at least once in the list."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "List"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Composite"
              }
            },
            {
              "@id": "oa:TextQuoteSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector that describes a textual segment by means of quoting it, plus passages before or after it.\n\nFor example, if the document were \"abcdefghijklmnopqrstuvwxyz\", one could select \"efg\" by a oa:prefix of \"abcd\", the quotation of oa:exact \"efg\" and a oa:suffix of \"hijk\".\n\nThe text MUST be normalized before recording.\n\nEach TextQuoteSelector MUST have exactly 1 oa:exact property.\n\nEach TextQuoteSelector SHOULD have exactly 1 oa:prefix property, and MUST NOT have more than 1.\n\nEach TextQuoteSelector SHOULD have exactly 1 oa:suffix property, and MUST NOT have more than 1."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "TextQuoteSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:cachedSource",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A link to a copy of the Source resource's representation appropriate for the Annotation, typically a copy of the original at the time that the Annotation was created"
              },
              "rdfs:domain": {
                "@id": "oa:TimeState"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "cachedSource"
              }
            },
            {
              "@id": "oa:bookmarking",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents the creation of a bookmark to the target resources or recorded point or points within one or more resources. For example, an Annotation that bookmarks the point in a text where the reader finished reading. Bookmark Annotations may or may not have a Body resource."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "bookmarking"
              }
            },
            {
              "@id": "oa:SemanticTag",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A class assigned to the Body when it is a semantic tagging resource; a URI that identifies a concept, rather than an embedded string, frequently a term from a controlled vocabulary.\n\nIt is NOT RECOMMENDED to use the URI of a document as a Semantic Tag, as it might also be used as a regular Body in other Annotations which would inherit the oa:SemanticTag class assignment. Instead it is more appropriate to create a new URI and link it to the document, using the foaf:page predicate."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "SemanticTag"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Tag"
              }
            },
            {
              "@id": "oa:hasSource",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:SpecificResource and the resource that it is a more specific representation of. \n\nThere MUST be exactly 1 oa:hasSource relationship associated with a Specific Resource."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasSource"
              }
            },
            {
              "@id": "oa:default",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The constituent resource of a oa:Choice to use as a default option, if there is no other means to determine which would be most appropriate.\n\nThere SHOULD be exactly 1 default relationship for each Choice."
              },
              "rdfs:domain": {
                "@id": "oa:Choice"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "default"
              },
              "rdfs:subPropertyOf": {
                "@id": "oa:item"
              }
            },
            {
              "@id": "oa:hasSelector",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:SpecificResource and a oa:Selector.\n\nThere MUST be exactly 0 or 1 oa:hasSelector relationship associated with a \nSpecific Resource. \n\nIf multiple Selectors are required, either to express a choice between different optional, equivalent selectors, or a chain of selectors that should all be processed, it is necessary to use oa:Choice, oa:Composite or oa:List as a selector."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasSelector"
              },
              "rdfs:range": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:hasTarget",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between oa:Annotation and target. The target resource is what the oa:hasBody is somewhat \"about\".\n\nThe target may be of any media type, and contain any type of content. The target SHOULD be identified by HTTP URIs unless they are embedded within the Annotation.\n\nEmbedded targets SHOULD be instances of cnt:ContentAsText and embed their content with cnt:chars. They SHOULD declare their media type with dc:format, and MAY indicate their language using dc:language and a RFC-3066 language tag. \n\nThere is no OA class provided for \"Target\" as a target might be a body in a different annotation. However, there SHOULD be 1 or more content-based classes associated with the target resources of an Annotation, and the dctypes: vocabulary is recommended for this purpose, for instance dctypes:Text to declare textual content."
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasTarget"
              }
            },
            {
              "@id": "oa:TextPositionSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "An oa:Selector which describes a range of text based on its start and end positions.\n\nThe text MUST be normalized before counting characters. For a Selector that works from the bitstream rather than the rendered characters, see oa:DataPositionSelector.\n\nEach oa:TextPositionSelector MUST have exactly 1 oa:start property.\n\nEach oa:TextPositionSelector MUST have exactly 1 oa:end property."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "TextPositionSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:serializedAt",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The time at which the agent referenced by oa:serializedBy generated the first serialization of the Annotation, and any subsequent substantially different one. The annotation graph MUST have changed for this property to be updated, and as such represents the last modified datestamp for the Annotation. This might be used to determine if it should be re-imported into a triplestore when discovered. \n\nThere MAY be exactly 1 oa:serializedAt property per Annotation, and MUST NOT be more than 1. The datetime MUST be expressed in the xsd:dateTime format, and SHOULD have a timezone specified.\n"
              },
              "rdfs:domain": {
                "@id": "oa:Annotation"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "serializedAt"
              },
              "rdfs:range": {
                "@id": "xsd:dateTimeStamp"
              }
            },
            {
              "@id": "oa:Composite",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A multiplicity construct that conveys to a consuming application that all of the constituent resources are required for the Annotation to be correctly interpreted. \n\noa:Composite can be used as the object of the object of the oa:hasBody, oa:hasTarget, oa:hasSelector, oa:hasState, oa:styledBy and oa:hasScope relationships, \n\nThere MUST be 2 or more oa:item relationships for each oa:Composite."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": "Composite",
              "rdfs:subClassOf": {
                "@id": "rdf:Bag"
              }
            },
            {
              "@id": "oa:classifying",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents the assignment of a classification type, typically from a controlled vocabulary, to the target resource(s). For example to classify an Image resource as a Portrait."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "classifying"
              }
            },
            {
              "@id": "oa:identifying",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents the assignment of an identity to the target resource(s). For example, annotating the name of a city in a string of text with the URI that identifies it."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "identifying"
              }
            },
            {
              "@id": "oa:HttpRequestState",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes how to retrieve an appropriate representation of the Source resource for the Annotation, based on the HTTP Request headers to send to the server.\n\nThere MUST be exactly 1 rdf:value property per HttpRequestState, containing HTTP request headers as a single, complete string, exactly as they would appear in an HTTP request. "
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "HttpRequestState"
              },
              "rdfs:subClassOf": {
                "@id": "oa:State"
              }
            },
            {
              "@id": "oa:DataPositionSelector",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A Selector which describes a range of data based on its start and end positions within the byte stream of the representation.\n\nEach DataPositionSelector MUST have exactly 1 oa:start property.\n\nEach TextPositionSelector MUST have exactly 1 oa:end property.\n\nSee oa:TextPositionSelector for selection at normalized character level rather than bytestream level."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "DataPositionSelector"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Selector"
              }
            },
            {
              "@id": "oa:linking",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents an untyped link to a resource related to the target."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "linking"
              }
            },
            {
              "@id": "oa:motivationScheme",
              "@type": [
                "skos:ConceptScheme",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The concept scheme for Open Annotation Motivations"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "motivationScheme"
              }
            },
            {
              "@id": "oa:replying",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a reply to a previous statement, either an Annotation or another resource. For example providing the assistance requested in the above."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "replying"
              }
            },
            {
              "@id": "oa:start",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The starting position of the segment of text or bytes. The first character/byte in the full text/stream is position 0. The character/byte indicated at position oa:start is included within the selected segment. \n\nSee oa:DataPositionSelector and oa:TextPositionSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "start"
              },
              "rdfs:range": {
                "@id": "xsd:nonNegativeInteger"
              }
            },
            {
              "@id": "oa:end",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The end position of the segment of text or bytes. The first character/byte in the full text/stream is position 0. The character/byte indicated at position oa:end is NOT included within the selected segment. \n\nSee oa:DataPositionSelector and oa:oa:TextPositionSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "end"
              },
              "rdfs:range": {
                "@id": "xsd:nonNegativeInteger"
              }
            },
            {
              "@id": "oa:TimeState",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes how to retrieve a representation of the Source resource that is temporally appropriate for the Annotation.\n\nThere MUST be at least one of oa:cachedSource or oa:when specified. If there is more than 1, each gives an alternative copy of the representation."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "TimeState"
              },
              "rdfs:subClassOf": {
                "@id": "oa:State"
              }
            },
            {
              "@id": "oa:State",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes how to retrieve an appropriate representation of the Source resource, indicated with oa:hasState from the Specific Resource.\n\nThis class is not used directly in Annotations, only its subclasses are.\n\nThe Specifier's description MAY be conveyed as an external or embedded resource (cnt:Content), or as RDF properties within the graph. The description SHOULD use existing standards whenever possible. If the Specifier has an HTTP URI, then its description, and only its description, MUST be returned when the URI is dereferenced."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "State"
              }
            },
            {
              "@id": "oa:CssStyle",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A resource which describes styles for resources participating in the Annotation using CSS.\n\nSpecific Resources MAY be assigned a CSS style class using oa:styleClass.\n\nThe CSS resource MAY have its own dereferencable URI that provides the information. For example, \"Style1\" in the diagram below might actually have the URI \"http://www.example.com/styles/annotations.css\". It MAY be embedded within the Annotation using the inline constructions described in Embedding Resources."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "CssStyle"
              },
              "rdfs:subClassOf": {
                "@id": "oa:Style"
              }
            },
            {
              "@id": "oa:item",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a multiplicity construct node and its constituent resources.\n\nThere MUST be 1 or more item relationships for each multiplicity construct oa:Choice, oa:Composite and oa:List."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "item"
              },
              "rdfs:subPropertyOf": {
                "@id": "rdfs:member"
              }
            },
            {
              "@id": "oa:hasScope",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a Specific Resource and the resource that provides the scope or context for it in this Annotation.\n\nThere MAY be 0 or more hasScope relationships for each Specific Resource."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasScope"
              }
            },
            {
              "@id": "oa:suffix",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The snippet of text that occurs immediately after the text which is being selected. \n\nSee oa:TextQuoteSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "suffix"
              }
            },
            {
              "@id": "oa:hasState",
              "@type": "owl:ObjectProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The relationship between a oa:SpecificResource and a oa:State resource.\n\nThere MAY be 0 or 1 oa:hasState relationship for each SpecificResource.\n\nIf there are multiple State resources that must be associated with the specific resource, then the use of the Multiplicity Constructs oa:Choice, oa:Composite or oa:List is RECOMMENDED."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "hasState"
              },
              "rdfs:range": {
                "@id": "oa:State"
              }
            },
            {
              "@id": "oa:",
              "@type": "owl:Ontology",
              "dc:contributor": {
                "@language": "en",
                "@value": "Stian Soiland-Reyes"
              },
              "dc:creator": [
                {
                  "@language": "en",
                  "@value": "Robert Sanderson"
                },
                {
                  "@language": "it",
                  "@value": "Paolo Ciccarese"
                },
                {
                  "@language": "vls",
                  "@value": "Herbert Van de Sompel"
                }
              ],
              "dc:description": {
                "@language": "en",
                "@value": "The Open Annotation Core Data Model specifies an interoperable framework for creating associations between related resources, annotations, using a methodology that conforms to the Architecture of the World Wide Web. Open Annotations can easily be shared between platforms, with sufficient richness of expression to satisfy complex requirements while remaining simple enough to also allow for the most common use cases, such as attaching a piece of text to a single web resource.\n\nAn Annotation is considered to be a set of connected resources, typically including a body and target, where the body is somehow about the target. The full model supports additional functionality, enabling semantic annotations, embedding content, selecting segments of resources, choosing the appropriate representation of a resource and providing styling hints for consuming clients."
              },
              "dc:title": {
                "@language": "en",
                "@value": "Open Annotation Data Model"
              },
              "dcterms:modified": {
                "@type": "xsd:dateTime",
                "@value": "2013-02-22T21:40:51+01:00"
              },
              "owl:versionIRI": {
                "@id": "http://www.openannotation.org/spec/core/20130208/oa.owl"
              },
              "owl:versionInfo": "0.9.20130208",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The Open Annotation Core Data Model specifies an interoperable framework for creating associations between related resources, annotations, using a methodology that conforms to the Architecture of the World Wide Web.\n\nThis ontology is a non-normative OWL formalization of the textual OA specification at http://www.openannotation.org/spec/core/20130208/index.html\n\nNote that OWL imports are disabled in the published version in order to reduce external implications, improve OWL 2 Profile conformity and increase interoperability. Some OWL tools might thus misleadingly show this ontology as (re)defining properties like skos:prefLabel."
              },
              "rdfs:seeAlso": {
                "@id": "http://www.openannotation.org/spec/core/20130208/index.html"
              }
            },
            {
              "@id": "oa:questioning",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents asking a question about the target resource(s). For example to ask for assistance with a particular section of text, or question its veracity."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "questioning"
              }
            },
            {
              "@id": "oa:describing",
              "@type": [
                "oa:Motivation",
                "owl:NamedIndividual"
              ],
              "rdfs:comment": {
                "@language": "en",
                "@value": "The motivation that represents a description of the target resource(s), as opposed to a comment about them. For example describing the above PDF's contents, rather than commenting on their accuracy."
              },
              "skos:inScheme": {
                "@id": "oa:motivationScheme"
              },
              "skos:prefLabel": {
                "@language": "en",
                "@value": "describing"
              }
            },
            {
              "@id": "oa:styleClass",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "The string name of the class used in the CSS description that should be applied to the Specific Resource.\n\nThere MAY be 0 or more styleClass properties on a Specific Resource.\n\nSee oa:CssStyle."
              },
              "rdfs:domain": {
                "@id": "oa:SpecificResource"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "styleClass"
              }
            },
            {
              "@id": "oa:Tag",
              "@type": "owl:Class",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A class assigned to the Body when it is a tag, such as a embedded text string with cnt:chars.\n\nTags are typically keywords or labels, and used for organization, description or discovery of the resource being tagged. In the Semantic Web, URIs are used instead of strings to avoid the issue of polysemy where one word has multiple meanings, such usage MUST be indicated using the subclass oa:SemanticTag.\n\nAnnotations that tag resources, either with text or semantic tags, SHOULD also have the oa:tagging motivation to make the reason for the Annotation more clear to applications, and MAY have other motivations as well."
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "Tag"
              }
            },
            {
              "@id": "oa:prefix",
              "@type": "owl:DatatypeProperty",
              "rdfs:comment": {
                "@language": "en",
                "@value": "A snippet of text that occurs immediately before the text which is being selected.\n\nSee oa:TextQuoteSelector."
              },
              "rdfs:domain": {
                "@id": "oa:Selector"
              },
              "rdfs:isDefinedBy": {
                "@id": "oa:"
              },
              "rdfs:label": {
                "@language": "en",
                "@value": "prefix"
              }
            }
          ]
        }


    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:36 GMT
- request:
    method: get
    uri: http://localhost:3000/annotations/e9%2F9e%2F78%2Ffb%2Fe99e78fb-3260-4dee-a06f-b7f53b3e2f0d
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/x-ld+json
      Accept-Encoding:
      - gzip, deflate
      User-Agent:
      - Ruby
  response:
    status:
      code: 406
      message: 'Not Acceptable '
    headers:
      Content-Type:
      - text/html; charset=utf-8
      Content-Length:
      - '129100'
      X-Request-Id:
      - 3ad5f38e-89f8-40fe-b601-875e85009915
      X-Runtime:
      - '0.256942'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Mon, 11 May 2015 21:27:36 GMT
      Connection:
      - Keep-Alive
    body:
      encoding: UTF-8
      string: "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"
        />\n  <title>Action Controller: Exception caught</title>\n  <style>\n    body
        {\n      background-color: #FAFAFA;\n      color: #333;\n      margin: 0px;\n
        \   }\n\n    body, p, ol, ul, td {\n      font-family: helvetica, verdana,
        arial, sans-serif;\n      font-size:   13px;\n      line-height: 18px;\n    }\n\n
        \   pre {\n      font-size: 11px;\n      white-space: pre-wrap;\n    }\n\n
        \   pre.box {\n      border: 1px solid #EEE;\n      padding: 10px;\n      margin:
        0px;\n      width: 958px;\n    }\n\n    header {\n      color: #F0F0F0;\n
        \     background: #C52F24;\n      padding: 0.5em 1.5em;\n    }\n\n    h1 {\n
        \     margin: 0.2em 0;\n      line-height: 1.1em;\n      font-size: 2em;\n
        \   }\n\n    h2 {\n      color: #C52F24;\n      line-height: 25px;\n    }\n\n
        \   .details {\n      border: 1px solid #D0D0D0;\n      border-radius: 4px;\n
        \     margin: 1em 0px;\n      display: block;\n      width: 978px;\n    }\n\n
        \   .summary {\n      padding: 8px 15px;\n      border-bottom: 1px solid #D0D0D0;\n
        \     display: block;\n    }\n\n    .details pre {\n      margin: 5px;\n      border:
        none;\n    }\n\n    #container {\n      box-sizing: border-box;\n      width:
        100%;\n      padding: 0 1.5em;\n    }\n\n    .source * {\n      margin: 0px;\n
        \     padding: 0px;\n    }\n\n    .source {\n      border: 1px solid #D9D9D9;\n
        \     background: #ECECEC;\n      width: 978px;\n    }\n\n    .source pre
        {\n      padding: 10px 0px;\n      border: none;\n    }\n\n    .source .data
        {\n      font-size: 80%;\n      overflow: auto;\n      background-color: #FFF;\n
        \   }\n\n    .info {\n      padding: 0.5em;\n    }\n\n    .source .data .line_numbers
        {\n      background-color: #ECECEC;\n      color: #AAA;\n      padding: 1em
        .5em;\n      border-right: 1px solid #DDD;\n      text-align: right;\n    }\n\n
        \   .line {\n      padding-left: 10px;\n    }\n\n    .line:hover {\n      background-color:
        #F6F6F6;\n    }\n\n    .line.active {\n      background-color: #FFCCCC;\n
        \   }\n\n    .hidden {\n      display: none;\n    }\n\n    a { color: #980905;
        }\n    a:visited { color: #666; }\n    a.trace-frames { color: #666; }\n    a:hover
        { color: #C52F24; }\n    a.trace-frames.selected { color: #C52F24 }\n\n    \n
        \ </style>\n\n  <script>\n    var toggle = function(id) {\n      var s = document.getElementById(id).style;\n
        \     s.display = s.display == 'none' ? 'block' : 'none';\n      return false;\n
        \   }\n    var show = function(id) {\n      document.getElementById(id).style.display
        = 'block';\n    }\n    var hide = function(id) {\n      document.getElementById(id).style.display
        = 'none';\n    }\n    var toggleTrace = function() {\n      return toggle('blame_trace');\n
        \   }\n    var toggleSessionDump = function() {\n      return toggle('session_dump');\n
        \   }\n    var toggleEnvDump = function() {\n      return toggle('env_dump');\n
        \   }\n  </script>\n</head>\n<body>\n\n<header>\n  <h1>\n    ActionController::UnknownFormat\n
        \     in Triannon::AnnotationsController#show\n  </h1>\n</header>\n\n<div
        id=\"container\">\n  <h2>ActionController::UnknownFormat</h2>\n\n      <div
        class=\"source \" id=\"frame-source-0\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#218</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>216</span>\n<span>217</span>\n<span>218</span>\n<span>219</span>\n<span>220</span>\n<span>221</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        response ? response.call : render({})\n</div><div class=\"line\">
        \     else\n</div><div class=\"line active\">        raise ActionController::UnknownFormat\n</div><div
        class=\"line\">      end\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-1\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#21</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n<span>24</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def show\n</div><div class=\"line\">      # TODO:  json.set!
        &quot;@context&quot;, OA::Graph::OA_DATED_CONTEXT_URL - would this work?\n</div><div
        class=\"line active\">      respond_to do |format|\n</div><div class=\"line\">
        \       format.jsonld {\n</div><div class=\"line\">          context_url =
        context_url_from_accept ? context_url_from_accept : context_url_from_link\n</div><div
        class=\"line\">          if context_url &amp;&amp; context_url == OA::Graph::IIIF_CONTEXT_URL\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-2\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#4</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>2</span>\n<span>3</span>\n<span>4</span>\n<span>5</span>\n<span>6</span>\n<span>7</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">  module ImplicitRender\n</div><div class=\"line\">    def
        send_action(method, *args)\n</div><div class=\"line active\">      ret = super\n</div><div
        class=\"line\">      default_render unless performed?\n</div><div class=\"line\">
        \     ret\n</div><div class=\"line\">    end\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-3\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#198</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>196</span>\n<span>197</span>\n<span>198</span>\n<span>199</span>\n<span>200</span>\n<span>201</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      # which is *not* necessarily the same as the action name.\n</div><div
        class=\"line\">      def process_action(method_name, *args)\n</div><div class=\"line
        active\">        send_action(method_name, *args)\n</div><div class=\"line\">
        \     end\n</div><div class=\"line\">\n</div><div class=\"line\">      # Actually
        call the method associated with the action. Override\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-4\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#10</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>8</span>\n<span>9</span>\n<span>10</span>\n<span>11</span>\n<span>12</span>\n<span>13</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def process_action(*) #:nodoc:\n</div><div class=\"line\">
        \     self.formats = request.formats.map(&amp;:ref).compact\n</div><div class=\"line
        active\">      super\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div><div
        class=\"line\">    # Check for double render errors and set the content_type
        after rendering.\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-5\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#20</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def process_action(*args)\n</div><div class=\"line\">      run_callbacks(:process_action)
        do\n</div><div class=\"line active\">        super\n</div><div class=\"line\">
        \     end\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-6\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#117</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>115</span>\n<span>116</span>\n<span>117</span>\n<span>118</span>\n<span>119</span>\n<span>120</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def call(env)\n</div><div class=\"line\">          block
        = env.run_block\n</div><div class=\"line active\">          env.value = !env.halted
        &amp;&amp; (!block || block.call)\n</div><div class=\"line\">          env\n</div><div
        class=\"line\">        end\n</div><div class=\"line\">      end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-7\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#117</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>115</span>\n<span>116</span>\n<span>117</span>\n<span>118</span>\n<span>119</span>\n<span>120</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def call(env)\n</div><div class=\"line\">          block
        = env.run_block\n</div><div class=\"line active\">          env.value = !env.halted
        &amp;&amp; (!block || block.call)\n</div><div class=\"line\">          env\n</div><div
        class=\"line\">        end\n</div><div class=\"line\">      end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-8\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#151</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>149</span>\n<span>150</span>\n<span>151</span>\n<span>152</span>\n<span>153</span>\n<span>154</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting_and_conditional\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-9\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#151</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>149</span>\n<span>150</span>\n<span>151</span>\n<span>152</span>\n<span>153</span>\n<span>154</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting_and_conditional\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-10\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#151</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>149</span>\n<span>150</span>\n<span>151</span>\n<span>152</span>\n<span>153</span>\n<span>154</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting_and_conditional\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-11\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#234</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>232</span>\n<span>233</span>\n<span>234</span>\n<span>235</span>\n<span>236</span>\n<span>237</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def self.halting(next_callback, user_callback)\n</div><div
        class=\"line\">          lambda { |env|\n</div><div class=\"line active\">
        \           env = next_callback.call env\n</div><div class=\"line\">            unless
        env.halted\n</div><div class=\"line\">              user_callback.call env.target,
        env.value\n</div><div class=\"line\">            end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-12\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#234</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>232</span>\n<span>233</span>\n<span>234</span>\n<span>235</span>\n<span>236</span>\n<span>237</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def self.halting(next_callback, user_callback)\n</div><div
        class=\"line\">          lambda { |env|\n</div><div class=\"line active\">
        \           env = next_callback.call env\n</div><div class=\"line\">            unless
        env.halted\n</div><div class=\"line\">              user_callback.call env.target,
        env.value\n</div><div class=\"line\">            end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-13\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#169</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>167</span>\n<span>168</span>\n<span>169</span>\n<span>170</span>\n<span>171</span>\n<span>172</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-14\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#169</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>167</span>\n<span>168</span>\n<span>169</span>\n<span>170</span>\n<span>171</span>\n<span>172</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-15\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#169</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>167</span>\n<span>168</span>\n<span>169</span>\n<span>170</span>\n<span>171</span>\n<span>172</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-16\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#169</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>167</span>\n<span>168</span>\n<span>169</span>\n<span>170</span>\n<span>171</span>\n<span>172</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">              end\n</div><div class=\"line\">            end\n</div><div
        class=\"line active\">            next_callback.call env\n</div><div class=\"line\">
        \         }\n</div><div class=\"line\">        end\n</div><div class=\"line\">
        \       private_class_method :halting\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-17\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#92</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>90</span>\n<span>91</span>\n<span>92</span>\n<span>93</span>\n<span>94</span>\n<span>95</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        runner = callbacks.compile\n</div><div class=\"line\">
        \       e = Filters::Environment.new(self, false, nil, block)\n</div><div
        class=\"line active\">        runner.call(e).value\n</div><div class=\"line\">
        \     end\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-18\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#92</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>90</span>\n<span>91</span>\n<span>92</span>\n<span>93</span>\n<span>94</span>\n<span>95</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        runner = callbacks.compile\n</div><div class=\"line\">
        \       e = Filters::Environment.new(self, false, nil, block)\n</div><div
        class=\"line active\">        runner.call(e).value\n</div><div class=\"line\">
        \     end\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-19\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#734</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>732</span>\n<span>733</span>\n<span>734</span>\n<span>735</span>\n<span>736</span>\n<span>737</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          module_eval &lt;&lt;-RUBY, __FILE__, __LINE__ + 1\n</div><div
        class=\"line\">            def _run_#{name}_callbacks(&amp;block)\n</div><div
        class=\"line active\">              _run_callbacks(_#{name}_callbacks, &amp;block)\n</div><div
        class=\"line\">            end\n</div><div class=\"line\">          RUBY\n</div><div
        class=\"line\">        end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-20\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#81</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>79</span>\n<span>80</span>\n<span>81</span>\n<span>82</span>\n<span>83</span>\n<span>84</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    #   end\n</div><div class=\"line\">    def run_callbacks(kind,
        &amp;block)\n</div><div class=\"line active\">      send &quot;_run_#{kind}_callbacks&quot;,
        &amp;block\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div><div
        class=\"line\">    private\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-21\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#19</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>17</span>\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    # process_action callbacks around the normal behavior.\n</div><div
        class=\"line\">    def process_action(*args)\n</div><div class=\"line active\">
        \     run_callbacks(:process_action) do\n</div><div class=\"line\">        super\n</div><div
        class=\"line\">      end\n</div><div class=\"line\">    end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-22\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#29</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>27</span>\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    private\n</div><div class=\"line\">      def process_action(*args)\n</div><div
        class=\"line active\">        super\n</div><div class=\"line\">      rescue
        Exception =&gt; exception\n</div><div class=\"line\">        request.env[&#39;action_dispatch.show_detailed_exceptions&#39;]
        ||= show_detailed_exceptions?\n</div><div class=\"line\">        rescue_with_handler(exception)
        || raise(exception)\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-23\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#31</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n<span>34</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">      ActiveSupport::Notifications.instrument(&quot;process_action.action_controller&quot;,
        raw_payload) do |payload|\n</div><div class=\"line active\">        result
        = super\n</div><div class=\"line\">        payload[:status] = response.status\n</div><div
        class=\"line\">        append_info_to_payload(payload)\n</div><div class=\"line\">
        \       result\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-24\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#164</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>162</span>\n<span>163</span>\n<span>164</span>\n<span>165</span>\n<span>166</span>\n<span>167</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      def instrument(name, payload = {})\n</div><div class=\"line\">
        \       if notifier.listening?(name)\n</div><div class=\"line active\">          instrumenter.instrument(name,
        payload) { yield payload if block_given? }\n</div><div class=\"line\">        else\n</div><div
        class=\"line\">          yield payload if block_given?\n</div><div class=\"line\">
        \       end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-25\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#20</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        start name, payload\n</div><div class=\"line\">        begin\n</div><div
        class=\"line active\">          yield payload\n</div><div class=\"line\">
        \       rescue Exception =&gt; e\n</div><div class=\"line\">          payload[:exception]
        = [e.class.name, e.message]\n</div><div class=\"line\">          raise e\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-26\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#164</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>162</span>\n<span>163</span>\n<span>164</span>\n<span>165</span>\n<span>166</span>\n<span>167</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      def instrument(name, payload = {})\n</div><div class=\"line\">
        \       if notifier.listening?(name)\n</div><div class=\"line active\">          instrumenter.instrument(name,
        payload) { yield payload if block_given? }\n</div><div class=\"line\">        else\n</div><div
        class=\"line\">          yield payload if block_given?\n</div><div class=\"line\">
        \       end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-27\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#30</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      ActiveSupport::Notifications.instrument(&quot;start_processing.action_controller&quot;,
        raw_payload.dup)\n</div><div class=\"line\">\n</div><div class=\"line active\">
        \     ActiveSupport::Notifications.instrument(&quot;process_action.action_controller&quot;,
        raw_payload) do |payload|\n</div><div class=\"line\">        result = super\n</div><div
        class=\"line\">        payload[:status] = response.status\n</div><div class=\"line\">
        \       append_info_to_payload(payload)\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-28\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#250</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>248</span>\n<span>249</span>\n<span>250</span>\n<span>251</span>\n<span>252</span>\n<span>253</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        request.filtered_parameters.merge! wrapped_filtered_hash\n</div><div
        class=\"line\">      end\n</div><div class=\"line active\">      super\n</div><div
        class=\"line\">    end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \   private\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-29\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#18</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>16</span>\n<span>17</span>\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        # and it won&#39;t be cleaned up by the method below.\n</div><div
        class=\"line\">        ActiveRecord::LogSubscriber.reset_runtime\n</div><div
        class=\"line active\">        super\n</div><div class=\"line\">      end\n</div><div
        class=\"line\">\n</div><div class=\"line\">      def cleanup_view_runtime\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-30\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#137</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>135</span>\n<span>136</span>\n<span>137</span>\n<span>138</span>\n<span>139</span>\n<span>140</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      @_response_body = nil\n</div><div class=\"line\">\n</div><div
        class=\"line active\">      process_action(action_name, *args)\n</div><div
        class=\"line\">    end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \   # Delegates to the class&#39; #controller_path\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-31\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#30</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def process(*) #:nodoc:\n</div><div class=\"line\">      old_config,
        I18n.config = I18n.config, I18nProxy.new(I18n.config, lookup_context)\n</div><div
        class=\"line active\">      super\n</div><div class=\"line\">    ensure\n</div><div
        class=\"line\">      I18n.config = old_config\n</div><div class=\"line\">
        \   end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-32\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#195</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>193</span>\n<span>194</span>\n<span>195</span>\n<span>196</span>\n<span>197</span>\n<span>198</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      @_env = request.env\n</div><div class=\"line\">      @_env[&#39;action_controller.instance&#39;]
        = self\n</div><div class=\"line active\">      process(name)\n</div><div class=\"line\">
        \     to_a\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-33\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#13</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>11</span>\n<span>12</span>\n<span>13</span>\n<span>14</span>\n<span>15</span>\n<span>16</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def dispatch(action, request)\n</div><div class=\"line\">
        \     set_response!(request)\n</div><div class=\"line active\">      super(action,
        request)\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div><div
        class=\"line\">    def response_body=(body)\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-34\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#236</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>234</span>\n<span>235</span>\n<span>236</span>\n<span>237</span>\n<span>238</span>\n<span>239</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        end\n</div><div class=\"line\">      else\n</div><div
        class=\"line active\">        lambda { |env| new.dispatch(name, klass.new(env))
        }\n</div><div class=\"line\">      end\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-35\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#73</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>71</span>\n<span>72</span>\n<span>73</span>\n<span>74</span>\n<span>75</span>\n<span>76</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">        def dispatch(controller,
        action, env)\n</div><div class=\"line active\">          controller.action(action).call(env)\n</div><div
        class=\"line\">        end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \       def normalize_controller!(params)\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-36\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#73</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>71</span>\n<span>72</span>\n<span>73</span>\n<span>74</span>\n<span>75</span>\n<span>76</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">        def dispatch(controller,
        action, env)\n</div><div class=\"line active\">          controller.action(action).call(env)\n</div><div
        class=\"line\">        end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \       def normalize_controller!(params)\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-37\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#42</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>40</span>\n<span>41</span>\n<span>42</span>\n<span>43</span>\n<span>44</span>\n<span>45</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          end\n</div><div class=\"line\">\n</div><div class=\"line
        active\">          dispatch(controller, params[:action], req.env)\n</div><div
        class=\"line\">        end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \       def prepare_params!(params)\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-38\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#49</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>47</span>\n<span>48</span>\n<span>49</span>\n<span>50</span>\n<span>51</span>\n<span>52</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">          if dispatcher?\n</div><div
        class=\"line active\">            @app.serve req\n</div><div class=\"line\">
        \         else\n</div><div class=\"line\">            @app.call req.env\n</div><div
        class=\"line\">          end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-39\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#43</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>41</span>\n<span>42</span>\n<span>43</span>\n<span>44</span>\n<span>45</span>\n<span>46</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          req.path_parameters = set_params.merge parameters\n</div><div
        class=\"line\">\n</div><div class=\"line active\">          status, headers,
        body = route.app.serve(req)\n</div><div class=\"line\">\n</div><div class=\"line\">
        \         if &#39;pass&#39; == headers[&#39;X-Cascade&#39;]\n</div><div class=\"line\">
        \           req.script_name     = script_name\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-40\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#30</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">      def serve(req)\n</div><div
        class=\"line active\">        find_routes(req).each do |match, parameters,
        route|\n</div><div class=\"line\">          set_params  = req.path_parameters\n</div><div
        class=\"line\">          path_info   = req.path_info\n</div><div class=\"line\">
        \         script_name = req.script_name\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-41\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#30</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">      def serve(req)\n</div><div
        class=\"line active\">        find_routes(req).each do |match, parameters,
        route|\n</div><div class=\"line\">          set_params  = req.path_parameters\n</div><div
        class=\"line\">          path_info   = req.path_info\n</div><div class=\"line\">
        \         script_name = req.script_name\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-42\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#802</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>800</span>\n<span>801</span>\n<span>802</span>\n<span>803</span>\n<span>804</span>\n<span>805</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        req = request_class.new(env)\n</div><div class=\"line\">
        \       req.path_info = Journey::Router::Utils.normalize_path(req.path_info)\n</div><div
        class=\"line active\">        @router.serve(req)\n</div><div class=\"line\">
        \     end\n</div><div class=\"line\">\n</div><div class=\"line\">      def
        recognize_path(path, environment = {})\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-43\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#518</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>516</span>\n<span>517</span>\n<span>518</span>\n<span>519</span>\n<span>520</span>\n<span>521</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        env[&quot;ROUTES_#{routes.object_id}_SCRIPT_NAME&quot;]
        = env[&#39;SCRIPT_NAME&#39;].dup\n</div><div class=\"line\">      end\n</div><div
        class=\"line active\">      app.call(env)\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">\n</div><div class=\"line\">    # Defines additional Rack env
        configuration that is added on each call.\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-44\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#194</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>192</span>\n<span>193</span>\n<span>194</span>\n<span>195</span>\n<span>196</span>\n<span>197</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def method_missing(name, *args, &amp;block)\n</div><div
        class=\"line\">          if instance.respond_to?(name)\n</div><div class=\"line
        active\">            instance.public_send(name, *args, &amp;block)\n</div><div
        class=\"line\">          else\n</div><div class=\"line\">            super\n</div><div
        class=\"line\">          end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-45\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#194</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>192</span>\n<span>193</span>\n<span>194</span>\n<span>195</span>\n<span>196</span>\n<span>197</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def method_missing(name, *args, &amp;block)\n</div><div
        class=\"line\">          if instance.respond_to?(name)\n</div><div class=\"line
        active\">            instance.public_send(name, *args, &amp;block)\n</div><div
        class=\"line\">          else\n</div><div class=\"line\">            super\n</div><div
        class=\"line\">          end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-46\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#51</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>49</span>\n<span>50</span>\n<span>51</span>\n<span>52</span>\n<span>53</span>\n<span>54</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">            @app.serve req\n</div><div class=\"line\">          else\n</div><div
        class=\"line active\">            @app.call req.env\n</div><div class=\"line\">
        \         end\n</div><div class=\"line\">        end\n</div><div class=\"line\">\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-47\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#43</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>41</span>\n<span>42</span>\n<span>43</span>\n<span>44</span>\n<span>45</span>\n<span>46</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          req.path_parameters = set_params.merge parameters\n</div><div
        class=\"line\">\n</div><div class=\"line active\">          status, headers,
        body = route.app.serve(req)\n</div><div class=\"line\">\n</div><div class=\"line\">
        \         if &#39;pass&#39; == headers[&#39;X-Cascade&#39;]\n</div><div class=\"line\">
        \           req.script_name     = script_name\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-48\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#30</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">      def serve(req)\n</div><div
        class=\"line active\">        find_routes(req).each do |match, parameters,
        route|\n</div><div class=\"line\">          set_params  = req.path_parameters\n</div><div
        class=\"line\">          path_info   = req.path_info\n</div><div class=\"line\">
        \         script_name = req.script_name\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-49\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#30</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">      def serve(req)\n</div><div
        class=\"line active\">        find_routes(req).each do |match, parameters,
        route|\n</div><div class=\"line\">          set_params  = req.path_parameters\n</div><div
        class=\"line\">          path_info   = req.path_info\n</div><div class=\"line\">
        \         script_name = req.script_name\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-50\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#802</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>800</span>\n<span>801</span>\n<span>802</span>\n<span>803</span>\n<span>804</span>\n<span>805</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        req = request_class.new(env)\n</div><div class=\"line\">
        \       req.path_info = Journey::Router::Utils.normalize_path(req.path_info)\n</div><div
        class=\"line active\">        @router.serve(req)\n</div><div class=\"line\">
        \     end\n</div><div class=\"line\">\n</div><div class=\"line\">      def
        recognize_path(path, environment = {})\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-51\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#24</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>22</span>\n<span>23</span>\n<span>24</span>\n<span>25</span>\n<span>26</span>\n<span>27</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      status, headers, body = @app.call(env)\n</div><div class=\"line\">\n</div><div
        class=\"line\">      if etag_status?(status) &amp;&amp; etag_body?(body) &amp;&amp;
        !skip_caching?(headers)\n</div><div class=\"line\">        original_body =
        body\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-52\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#25</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>23</span>\n<span>24</span>\n<span>25</span>\n<span>26</span>\n<span>27</span>\n<span>28</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      case env[REQUEST_METHOD]\n</div><div class=\"line\">
        \     when &quot;GET&quot;, &quot;HEAD&quot;\n</div><div class=\"line active\">
        \       status, headers, body = @app.call(env)\n</div><div class=\"line\">
        \       headers = Utils::HeaderHash.new(headers)\n</div><div class=\"line\">
        \       if status == 200 &amp;&amp; fresh?(env, headers)\n</div><div class=\"line\">
        \         status = 304\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-53\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#13</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>11</span>\n<span>12</span>\n<span>13</span>\n<span>14</span>\n<span>15</span>\n<span>16</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">  def call(env)\n</div><div class=\"line
        active\">    status, headers, body = @app.call(env)\n</div><div class=\"line\">\n</div><div
        class=\"line\">    if env[REQUEST_METHOD] == HEAD\n</div><div class=\"line\">
        \     [\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-54\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#27</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>25</span>\n<span>26</span>\n<span>27</span>\n<span>28</span>\n<span>29</span>\n<span>30</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      end\n</div><div class=\"line\">\n</div><div class=\"line
        active\">      @app.call(env)\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">\n</div><div class=\"line\">    private\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-55\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#260</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>258</span>\n<span>259</span>\n<span>260</span>\n<span>261</span>\n<span>262</span>\n<span>263</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      @app.call(env)\n</div><div class=\"line\">    ensure\n</div><div
        class=\"line\">      session    = Request::Session.find(env) || {}\n</div><div
        class=\"line\">      flash_hash = env[KEY]\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-56\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#225</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>223</span>\n<span>224</span>\n<span>225</span>\n<span>226</span>\n<span>227</span>\n<span>228</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        def context(env, app=@app)\n</div><div class=\"line\">
        \         prepare_session(env)\n</div><div class=\"line active\">          status,
        headers, body = app.call(env)\n</div><div class=\"line\">          commit_session(env,
        status, headers, body)\n</div><div class=\"line\">        end\n</div><div
        class=\"line\">\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-57\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#220</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>218</span>\n<span>219</span>\n<span>220</span>\n<span>221</span>\n<span>222</span>\n<span>223</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">        def call(env)\n</div><div
        class=\"line active\">          context(env)\n</div><div class=\"line\">        end\n</div><div
        class=\"line\">\n</div><div class=\"line\">        def context(env, app=@app)\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-58\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#560</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>558</span>\n<span>559</span>\n<span>560</span>\n<span>561</span>\n<span>562</span>\n<span>563</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      status, headers, body = @app.call(env)\n</div><div class=\"line\">\n</div><div
        class=\"line\">      if cookie_jar = env[&#39;action_dispatch.cookies&#39;]\n</div><div
        class=\"line\">        unless cookie_jar.committed?\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-59\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#36</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>34</span>\n<span>35</span>\n<span>36</span>\n<span>37</span>\n<span>38</span>\n<span>39</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      connection.enable_query_cache!\n</div><div class=\"line\">\n</div><div
        class=\"line active\">      response = @app.call(env)\n</div><div class=\"line\">
        \     response[2] = Rack::BodyProxy.new(response[2]) do\n</div><div class=\"line\">
        \       restore_query_cache_settings(connection_id, enabled)\n</div><div class=\"line\">
        \     end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-60\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#647</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>645</span>\n<span>646</span>\n<span>647</span>\n<span>648</span>\n<span>649</span>\n<span>650</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        testing = env[&#39;rack.test&#39;]\n</div><div class=\"line\">\n</div><div
        class=\"line active\">        response = @app.call(env)\n</div><div class=\"line\">
        \       response[2] = ::Rack::BodyProxy.new(response[2]) do\n</div><div class=\"line\">
        \         ActiveRecord::Base.clear_active_connections! unless testing\n</div><div
        class=\"line\">        end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-61\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#378</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>376</span>\n<span>377</span>\n<span>378</span>\n<span>379</span>\n<span>380</span>\n<span>381</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          end\n</div><div class=\"line\">        end\n</div><div
        class=\"line active\">        @app.call(env)\n</div><div class=\"line\">      end\n</div><div
        class=\"line\">\n</div><div class=\"line\">      private\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-62\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#29</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>27</span>\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      result = run_callbacks :call do\n</div><div class=\"line\">
        \       begin\n</div><div class=\"line active\">          @app.call(env)\n</div><div
        class=\"line\">        rescue =&gt; error\n</div><div class=\"line\">        end\n</div><div
        class=\"line\">      end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-63\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#88</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>86</span>\n<span>87</span>\n<span>88</span>\n<span>89</span>\n<span>90</span>\n<span>91</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def _run_callbacks(callbacks, &amp;block)\n</div><div class=\"line\">
        \     if callbacks.empty?\n</div><div class=\"line active\">        block.call
        if block\n</div><div class=\"line\">      else\n</div><div class=\"line\">
        \       runner = callbacks.compile\n</div><div class=\"line\">        e =
        Filters::Environment.new(self, false, nil, block)\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-64\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#88</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>86</span>\n<span>87</span>\n<span>88</span>\n<span>89</span>\n<span>90</span>\n<span>91</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def _run_callbacks(callbacks, &amp;block)\n</div><div class=\"line\">
        \     if callbacks.empty?\n</div><div class=\"line active\">        block.call
        if block\n</div><div class=\"line\">      else\n</div><div class=\"line\">
        \       runner = callbacks.compile\n</div><div class=\"line\">        e =
        Filters::Environment.new(self, false, nil, block)\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-65\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#734</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>732</span>\n<span>733</span>\n<span>734</span>\n<span>735</span>\n<span>736</span>\n<span>737</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          module_eval &lt;&lt;-RUBY, __FILE__, __LINE__ + 1\n</div><div
        class=\"line\">            def _run_#{name}_callbacks(&amp;block)\n</div><div
        class=\"line active\">              _run_callbacks(_#{name}_callbacks, &amp;block)\n</div><div
        class=\"line\">            end\n</div><div class=\"line\">          RUBY\n</div><div
        class=\"line\">        end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-66\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#81</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>79</span>\n<span>80</span>\n<span>81</span>\n<span>82</span>\n<span>83</span>\n<span>84</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    #   end\n</div><div class=\"line\">    def run_callbacks(kind,
        &amp;block)\n</div><div class=\"line active\">      send &quot;_run_#{kind}_callbacks&quot;,
        &amp;block\n</div><div class=\"line\">    end\n</div><div class=\"line\">\n</div><div
        class=\"line\">    private\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-67\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#27</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>25</span>\n<span>26</span>\n<span>27</span>\n<span>28</span>\n<span>29</span>\n<span>30</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def call(env)\n</div><div class=\"line\">      error =
        nil\n</div><div class=\"line active\">      result = run_callbacks :call do\n</div><div
        class=\"line\">        begin\n</div><div class=\"line\">          @app.call(env)\n</div><div
        class=\"line\">        rescue =&gt; error\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-68\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#73</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>71</span>\n<span>72</span>\n<span>73</span>\n<span>74</span>\n<span>75</span>\n<span>76</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      prepare!\n</div><div class=\"line\">\n</div><div class=\"line
        active\">      response = @app.call(env)\n</div><div class=\"line\">      response[2]
        = ::Rack::BodyProxy.new(response[2]) { cleanup! }\n</div><div class=\"line\">\n</div><div
        class=\"line\">      response\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-69\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#78</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>76</span>\n<span>77</span>\n<span>78</span>\n<span>79</span>\n<span>80</span>\n<span>81</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def call(env)\n</div><div class=\"line\">      env[&quot;action_dispatch.remote_ip&quot;]
        = GetIp.new(env, self)\n</div><div class=\"line active\">      @app.call(env)\n</div><div
        class=\"line\">    end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \   # The GetIp class exists as a way to defer processing of the request data\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-70\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#17</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>15</span>\n<span>16</span>\n<span>17</span>\n<span>18</span>\n<span>19</span>\n<span>20</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      _, headers, body = response = @app.call(env)\n</div><div class=\"line\">\n</div><div
        class=\"line\">      if headers[&#39;X-Cascade&#39;] == &#39;pass&#39;\n</div><div
        class=\"line\">        body.close if body.respond_to?(:close)\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-71\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#37</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>35</span>\n<span>36</span>\n<span>37</span>\n<span>38</span>\n<span>39</span>\n<span>40</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      end\n</div><div class=\"line\">\n</div><div class=\"line
        active\">      status, headers, body = @app.call(env)\n</div><div class=\"line\">\n</div><div
        class=\"line\">      if exception = env[&#39;web_console.exception&#39;]\n</div><div
        class=\"line\">        session = Session.from_exception(exception)\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-72\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#30</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n<span>32</span>\n<span>33</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      @app.call(env)\n</div><div class=\"line\">    rescue Exception
        =&gt; exception\n</div><div class=\"line\">      if env[&#39;action_dispatch.show_exceptions&#39;]
        == false\n</div><div class=\"line\">        raise exception\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-73\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#38</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>36</span>\n<span>37</span>\n<span>38</span>\n<span>39</span>\n<span>40</span>\n<span>41</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        instrumenter.start &#39;request.action_dispatch&#39;,
        request: request\n</div><div class=\"line\">        logger.info { started_request_message(request)
        }\n</div><div class=\"line active\">        resp = @app.call(env)\n</div><div
        class=\"line\">        resp[2] = ::Rack::BodyProxy.new(resp[2]) { finish(request)
        }\n</div><div class=\"line\">        resp\n</div><div class=\"line\">      rescue
        Exception\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-74\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#20</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">        if logger.respond_to?(:tagged)\n</div><div
        class=\"line active\">          logger.tagged(compute_tags(request)) { call_app(request,
        env) }\n</div><div class=\"line\">        else\n</div><div class=\"line\">
        \         call_app(request, env)\n</div><div class=\"line\">        end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-75\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#68</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>66</span>\n<span>67</span>\n<span>68</span>\n<span>69</span>\n<span>70</span>\n<span>71</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def tagged(*tags)\n</div><div
        class=\"line active\">      formatter.tagged(*tags) { yield self }\n</div><div
        class=\"line\">    end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \   def flush\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-76\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#26</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>24</span>\n<span>25</span>\n<span>26</span>\n<span>27</span>\n<span>28</span>\n<span>29</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      def tagged(*tags)\n</div><div class=\"line\">        new_tags
        = push_tags(*tags)\n</div><div class=\"line active\">        yield self\n</div><div
        class=\"line\">      ensure\n</div><div class=\"line\">        pop_tags(new_tags.size)\n</div><div
        class=\"line\">      end\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-77\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#68</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>66</span>\n<span>67</span>\n<span>68</span>\n<span>69</span>\n<span>70</span>\n<span>71</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def tagged(*tags)\n</div><div
        class=\"line active\">      formatter.tagged(*tags) { yield self }\n</div><div
        class=\"line\">    end\n</div><div class=\"line\">\n</div><div class=\"line\">
        \   def flush\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n
        \     </div>\n    </div>\n    <div class=\"source hidden\" id=\"frame-source-78\">\n
        \     <div class=\"info\">\n        Extracted source (around line <strong>#20</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">        if logger.respond_to?(:tagged)\n</div><div
        class=\"line active\">          logger.tagged(compute_tags(request)) { call_app(request,
        env) }\n</div><div class=\"line\">        else\n</div><div class=\"line\">
        \         call_app(request, env)\n</div><div class=\"line\">        end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-79\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#21</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>19</span>\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n<span>24</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def call(env)\n</div><div class=\"line\">      env[&quot;action_dispatch.request_id&quot;]
        = external_request_id(env) || internal_request_id\n</div><div class=\"line
        active\">      @app.call(env).tap { |_status, headers, _body| headers[&quot;X-Request-Id&quot;]
        = env[&quot;action_dispatch.request_id&quot;] }\n</div><div class=\"line\">
        \   end\n</div><div class=\"line\">\n</div><div class=\"line\">    private\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-80\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#22</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>20</span>\n<span>21</span>\n<span>22</span>\n<span>23</span>\n<span>24</span>\n<span>25</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      end\n</div><div class=\"line\">\n</div><div class=\"line
        active\">      @app.call(env)\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">\n</div><div class=\"line\">    def method_override(env)\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-81\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#18</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>16</span>\n<span>17</span>\n<span>18</span>\n<span>19</span>\n<span>20</span>\n<span>21</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">    def call(env)\n</div><div class=\"line\">      start_time
        = clock_time\n</div><div class=\"line active\">      status, headers, body
        = @app.call(env)\n</div><div class=\"line\">      request_time = clock_time
        - start_time\n</div><div class=\"line\">\n</div><div class=\"line\">      if
        !headers.has_key?(@header_name)\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-82\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#28</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>26</span>\n<span>27</span>\n<span>28</span>\n<span>29</span>\n<span>30</span>\n<span>31</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          def call(env)\n</div><div class=\"line\">            LocalCacheRegistry.set_cache_for(local_cache_key,
        LocalStore.new)\n</div><div class=\"line active\">            response = @app.call(env)\n</div><div
        class=\"line\">            response[2] = ::Rack::BodyProxy.new(response[2])
        do\n</div><div class=\"line\">              LocalCacheRegistry.set_cache_for(local_cache_key,
        nil)\n</div><div class=\"line\">            end\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-83\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#17</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>15</span>\n<span>16</span>\n<span>17</span>\n<span>18</span>\n<span>19</span>\n<span>20</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      old, env[FLAG] = env[FLAG], false\n</div><div class=\"line\">
        \     @mutex.lock\n</div><div class=\"line active\">      response = @app.call(env)\n</div><div
        class=\"line\">      body = BodyProxy.new(response[2]) { @mutex.unlock }\n</div><div
        class=\"line\">      response[2] = body\n</div><div class=\"line\">      response\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-84\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#113</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>111</span>\n<span>112</span>\n<span>113</span>\n<span>114</span>\n<span>115</span>\n<span>116</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      end\n</div><div class=\"line\">\n</div><div class=\"line
        active\">      @app.call(env)\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">  end\n</div><div class=\"line\">end\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-85\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#113</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>111</span>\n<span>112</span>\n<span>113</span>\n<span>114</span>\n<span>115</span>\n<span>116</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      status, headers, body = @app.call(env)\n</div><div class=\"line\">
        \     if body.respond_to?(:to_path)\n</div><div class=\"line\">        case
        type = variation(env)\n</div><div class=\"line\">        when &#39;X-Accel-Redirect&#39;\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-86\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#518</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>516</span>\n<span>517</span>\n<span>518</span>\n<span>519</span>\n<span>520</span>\n<span>521</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        env[&quot;ROUTES_#{routes.object_id}_SCRIPT_NAME&quot;]
        = env[&#39;SCRIPT_NAME&#39;].dup\n</div><div class=\"line\">      end\n</div><div
        class=\"line active\">      app.call(env)\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">\n</div><div class=\"line\">    # Defines additional Rack env
        configuration that is added on each call.\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-87\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#164</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>162</span>\n<span>163</span>\n<span>164</span>\n<span>165</span>\n<span>166</span>\n<span>167</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      env[&quot;ORIGINAL_FULLPATH&quot;] = build_original_fullpath(env)\n</div><div
        class=\"line\">      env[&quot;ORIGINAL_SCRIPT_NAME&quot;] = env[&quot;SCRIPT_NAME&quot;]\n</div><div
        class=\"line active\">      super(env)\n</div><div class=\"line\">    end\n</div><div
        class=\"line\">\n</div><div class=\"line\">    # Reload application routes
        regardless if they changed or not.\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-88\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#17</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>15</span>\n<span>16</span>\n<span>17</span>\n<span>18</span>\n<span>19</span>\n<span>20</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      old, env[FLAG] = env[FLAG], false\n</div><div class=\"line\">
        \     @mutex.lock\n</div><div class=\"line active\">      response = @app.call(env)\n</div><div
        class=\"line\">      body = BodyProxy.new(response[2]) { @mutex.unlock }\n</div><div
        class=\"line\">      response[2] = body\n</div><div class=\"line\">      response\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-89\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#15</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>13</span>\n<span>14</span>\n<span>15</span>\n<span>16</span>\n<span>17</span>\n<span>18</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">\n</div><div class=\"line\">    def call(env)\n</div><div class=\"line
        active\">      status, headers, body = @app.call(env)\n</div><div class=\"line\">
        \     headers = HeaderHash.new(headers)\n</div><div class=\"line\">\n</div><div
        class=\"line\">      if !STATUS_WITH_NO_ENTITY_BODY.include?(status.to_i)
        &amp;&amp;\n</div>\n</pre>\n</td>\n          </tr>\n        </table>\n      </div>\n
        \   </div>\n    <div class=\"source hidden\" id=\"frame-source-90\">\n      <div
        class=\"info\">\n        Extracted source (around line <strong>#89</strong>):\n
        \     </div>\n      <div class=\"data\">\n        <table cellpadding=\"0\"
        cellspacing=\"0\" class=\"lines\">\n          <tr>\n            <td>\n              <pre
        class=\"line_numbers\">\n<span>87</span>\n<span>88</span>\n<span>89</span>\n<span>90</span>\n<span>91</span>\n<span>92</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">        env[&quot;REQUEST_PATH&quot;] ||= [env[&quot;SCRIPT_NAME&quot;],
        env[PATH_INFO]].join\n</div><div class=\"line\">\n</div><div class=\"line
        active\">        status, headers, body = @app.call(env)\n</div><div class=\"line\">
        \       begin\n</div><div class=\"line\">          res.status = status.to_i\n</div><div
        class=\"line\">          headers.each { |k, vs|\n</div>\n</pre>\n</td>\n          </tr>\n
        \       </table>\n      </div>\n    </div>\n    <div class=\"source hidden\"
        id=\"frame-source-91\">\n      <div class=\"info\">\n        Extracted source
        (around line <strong>#138</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>136</span>\n<span>137</span>\n<span>138</span>\n<span>139</span>\n<span>140</span>\n<span>141</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">      si = servlet.get_instance(self, *options)\n</div><div
        class=\"line\">      @logger.debug(format(&quot;%s is invoked.&quot;, si.class.name))\n</div><div
        class=\"line active\">      si.service(req, res)\n</div><div class=\"line\">
        \   end\n</div><div class=\"line\">\n</div><div class=\"line\">    ##\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-92\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#94</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>92</span>\n<span>93</span>\n<span>94</span>\n<span>95</span>\n<span>96</span>\n<span>97</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">            callback.call(req, res)\n</div><div class=\"line\">
        \         end\n</div><div class=\"line active\">          server.service(req,
        res)\n</div><div class=\"line\">        rescue HTTPStatus::EOFError, HTTPStatus::RequestTimeout
        =&gt; ex\n</div><div class=\"line\">          res.set_error(ex)\n</div><div
        class=\"line\">        rescue HTTPStatus::Error =&gt; ex\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n    <div class=\"source
        hidden\" id=\"frame-source-93\">\n      <div class=\"info\">\n        Extracted
        source (around line <strong>#294</strong>):\n      </div>\n      <div class=\"data\">\n
        \       <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines\">\n          <tr>\n
        \           <td>\n              <pre class=\"line_numbers\">\n<span>292</span>\n<span>293</span>\n<span>294</span>\n<span>295</span>\n<span>296</span>\n<span>297</span>\n
        \             </pre>\n            </td>\n<td width=\"100%\">\n<pre>\n<div
        class=\"line\">          end\n</div><div class=\"line\">          call_callback(:AcceptCallback,
        sock)\n</div><div class=\"line active\">          block ? block.call(sock)
        : run(sock)\n</div><div class=\"line\">        rescue Errno::ENOTCONN\n</div><div
        class=\"line\">          @logger.debug &quot;Errno::ENOTCONN raised&quot;\n</div><div
        class=\"line\">        rescue ServerError =&gt; ex\n</div>\n</pre>\n</td>\n
        \         </tr>\n        </table>\n      </div>\n    </div>\n\n  \n<p><code>Rails.root:
        /data/src/dlss/ld4l_data/annotations/triannon/spec/internal</code></p>\n\n<div
        id=\"traces\">\n    <a href=\"#\" onclick=\"hide(&#39;Framework-Trace&#39;);hide(&#39;Full-Trace&#39;);show(&#39;Application-Trace&#39;);;
        return false;\">Application Trace</a> |\n    <a href=\"#\" onclick=\"hide(&#39;Application-Trace&#39;);hide(&#39;Full-Trace&#39;);show(&#39;Framework-Trace&#39;);;
        return false;\">Framework Trace</a> |\n    <a href=\"#\" onclick=\"hide(&#39;Application-Trace&#39;);hide(&#39;Framework-Trace&#39;);show(&#39;Full-Trace&#39;);;
        return false;\">Full Trace</a> \n\n    <div id=\"Application-Trace\" style=\"display:
        none;\">\n      <pre><code></code></pre>\n    </div>\n    <div id=\"Framework-Trace\"
        style=\"display: none;\">\n      <pre><code><a class=\"trace-frames\" data-frame-id=\"0\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/mime_responds.rb:218:in
        `respond_to&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"1\" href=\"#\">/data/src/dlss/ld4l_data/annotations/triannon/app/controllers/triannon/annotations_controller.rb:21:in
        `show&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"2\" href=\"#\">actionpack
        (4.2.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"3\" href=\"#\">actionpack (4.2.0) lib/abstract_controller/base.rb:198:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"4\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/rendering.rb:10:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"5\"
        href=\"#\">actionpack (4.2.0) lib/abstract_controller/callbacks.rb:20:in `block
        in process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"6\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:117:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"7\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:117:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"8\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:151:in
        `block in halting_and_conditional&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"9\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:151:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"10\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:151:in `block in halting_and_conditional&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"11\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:234:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"12\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:234:in
        `block in halting&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"13\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:169:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"14\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:169:in `block in halting&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"15\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:169:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"16\" href=\"#\">activesupport
        (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"17\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:92:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"18\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:92:in
        `_run_callbacks&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"19\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"20\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:81:in `run_callbacks&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"21\" href=\"#\">actionpack (4.2.0) lib/abstract_controller/callbacks.rb:19:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"22\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/rescue.rb:29:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"23\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/instrumentation.rb:31:in
        `block in process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"24\"
        href=\"#\">activesupport (4.2.0) lib/active_support/notifications.rb:164:in
        `block in instrument&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"25\"
        href=\"#\">activesupport (4.2.0) lib/active_support/notifications/instrumenter.rb:20:in
        `instrument&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"26\" href=\"#\">activesupport
        (4.2.0) lib/active_support/notifications.rb:164:in `instrument&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"27\" href=\"#\">actionpack (4.2.0)
        lib/action_controller/metal/instrumentation.rb:30:in `process_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"28\" href=\"#\">actionpack (4.2.0)
        lib/action_controller/metal/params_wrapper.rb:250:in `process_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"29\" href=\"#\">activerecord (4.2.0)
        lib/active_record/railties/controller_runtime.rb:18:in `process_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"30\" href=\"#\">actionpack (4.2.0)
        lib/abstract_controller/base.rb:137:in `process&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"31\" href=\"#\">actionview (4.2.0) lib/action_view/rendering.rb:30:in
        `process&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"32\" href=\"#\">actionpack
        (4.2.0) lib/action_controller/metal.rb:195:in `dispatch&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"33\" href=\"#\">actionpack (4.2.0) lib/action_controller/metal/rack_delegation.rb:13:in
        `dispatch&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"34\" href=\"#\">actionpack
        (4.2.0) lib/action_controller/metal.rb:236:in `block in action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"35\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/routing/route_set.rb:73:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"36\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:73:in
        `dispatch&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"37\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/routing/route_set.rb:42:in `serve&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"38\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/routing/mapper.rb:49:in `serve&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"39\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/journey/router.rb:43:in
        `block in serve&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"40\"
        href=\"#\">actionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in
        `each&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"41\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/journey/router.rb:30:in `serve&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"42\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/routing/route_set.rb:802:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"43\" href=\"#\">railties (4.2.0) lib/rails/engine.rb:518:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"44\" href=\"#\">railties
        (4.2.0) lib/rails/railtie.rb:194:in `public_send&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"45\" href=\"#\">railties (4.2.0) lib/rails/railtie.rb:194:in
        `method_missing&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"46\"
        href=\"#\">actionpack (4.2.0) lib/action_dispatch/routing/mapper.rb:51:in
        `serve&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"47\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/journey/router.rb:43:in `block in serve&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"48\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/journey/router.rb:30:in `each&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"49\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in
        `serve&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"50\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/routing/route_set.rb:802:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"51\" href=\"#\">rack (1.6.1) lib/rack/etag.rb:24:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"52\" href=\"#\">rack
        (1.6.1) lib/rack/conditionalget.rb:25:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"53\" href=\"#\">rack (1.6.1) lib/rack/head.rb:13:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"54\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/params_parser.rb:27:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"55\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/flash.rb:260:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"56\" href=\"#\">rack (1.6.1) lib/rack/session/abstract/id.rb:225:in
        `context&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"57\" href=\"#\">rack
        (1.6.1) lib/rack/session/abstract/id.rb:220:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"58\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/cookies.rb:560:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"59\" href=\"#\">activerecord
        (4.2.0) lib/active_record/query_cache.rb:36:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"60\" href=\"#\">activerecord (4.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"61\" href=\"#\">activerecord
        (4.2.0) lib/active_record/migration.rb:378:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"62\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:29:in
        `block in call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"63\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:88:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"64\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:88:in `_run_callbacks&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"65\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:734:in
        `_run_call_callbacks&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"66\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"67\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/callbacks.rb:27:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"68\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/reloader.rb:73:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"69\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/middleware/remote_ip.rb:78:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"70\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"71\" href=\"#\">web-console (2.1.2)
        lib/web_console/middleware.rb:37:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"72\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"73\" href=\"#\">railties
        (4.2.0) lib/rails/rack/logger.rb:38:in `call_app&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"74\" href=\"#\">railties (4.2.0) lib/rails/rack/logger.rb:20:in
        `block in call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"75\"
        href=\"#\">activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in
        `block in tagged&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"76\"
        href=\"#\">activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in
        `tagged&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"77\" href=\"#\">activesupport
        (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"78\" href=\"#\">railties (4.2.0) lib/rails/rack/logger.rb:20:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"79\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"80\" href=\"#\">rack (1.6.1) lib/rack/methodoverride.rb:22:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"81\" href=\"#\">rack
        (1.6.1) lib/rack/runtime.rb:18:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"82\" href=\"#\">activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"83\" href=\"#\">rack
        (1.6.1) lib/rack/lock.rb:17:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"84\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"85\" href=\"#\">rack
        (1.6.1) lib/rack/sendfile.rb:113:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"86\" href=\"#\">railties (4.2.0) lib/rails/engine.rb:518:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"87\" href=\"#\">railties
        (4.2.0) lib/rails/application.rb:164:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"88\" href=\"#\">rack (1.6.1) lib/rack/lock.rb:17:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"89\" href=\"#\">rack (1.6.1) lib/rack/content_length.rb:15:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"90\" href=\"#\">rack
        (1.6.1) lib/rack/handler/webrick.rb:89:in `service&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"91\" href=\"#\">/home/dlweber/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in
        `service&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"92\" href=\"#\">/home/dlweber/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in
        `run&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"93\" href=\"#\">/home/dlweber/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in
        `block in start_thread&#39;</a><br></code></pre>\n    </div>\n    <div id=\"Full-Trace\"
        style=\"display: block;\">\n      <pre><code><a class=\"trace-frames\" data-frame-id=\"0\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/mime_responds.rb:218:in
        `respond_to&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"1\" href=\"#\">/data/src/dlss/ld4l_data/annotations/triannon/app/controllers/triannon/annotations_controller.rb:21:in
        `show&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"2\" href=\"#\">actionpack
        (4.2.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"3\" href=\"#\">actionpack (4.2.0) lib/abstract_controller/base.rb:198:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"4\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/rendering.rb:10:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"5\"
        href=\"#\">actionpack (4.2.0) lib/abstract_controller/callbacks.rb:20:in `block
        in process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"6\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:117:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"7\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:117:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"8\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:151:in
        `block in halting_and_conditional&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"9\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:151:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"10\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:151:in `block in halting_and_conditional&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"11\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:234:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"12\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:234:in
        `block in halting&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"13\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:169:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"14\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:169:in `block in halting&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"15\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:169:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"16\" href=\"#\">activesupport
        (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"17\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:92:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"18\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:92:in
        `_run_callbacks&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"19\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"20\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:81:in `run_callbacks&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"21\" href=\"#\">actionpack (4.2.0) lib/abstract_controller/callbacks.rb:19:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"22\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/rescue.rb:29:in
        `process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"23\"
        href=\"#\">actionpack (4.2.0) lib/action_controller/metal/instrumentation.rb:31:in
        `block in process_action&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"24\"
        href=\"#\">activesupport (4.2.0) lib/active_support/notifications.rb:164:in
        `block in instrument&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"25\"
        href=\"#\">activesupport (4.2.0) lib/active_support/notifications/instrumenter.rb:20:in
        `instrument&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"26\" href=\"#\">activesupport
        (4.2.0) lib/active_support/notifications.rb:164:in `instrument&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"27\" href=\"#\">actionpack (4.2.0)
        lib/action_controller/metal/instrumentation.rb:30:in `process_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"28\" href=\"#\">actionpack (4.2.0)
        lib/action_controller/metal/params_wrapper.rb:250:in `process_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"29\" href=\"#\">activerecord (4.2.0)
        lib/active_record/railties/controller_runtime.rb:18:in `process_action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"30\" href=\"#\">actionpack (4.2.0)
        lib/abstract_controller/base.rb:137:in `process&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"31\" href=\"#\">actionview (4.2.0) lib/action_view/rendering.rb:30:in
        `process&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"32\" href=\"#\">actionpack
        (4.2.0) lib/action_controller/metal.rb:195:in `dispatch&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"33\" href=\"#\">actionpack (4.2.0) lib/action_controller/metal/rack_delegation.rb:13:in
        `dispatch&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"34\" href=\"#\">actionpack
        (4.2.0) lib/action_controller/metal.rb:236:in `block in action&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"35\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/routing/route_set.rb:73:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"36\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:73:in
        `dispatch&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"37\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/routing/route_set.rb:42:in `serve&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"38\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/routing/mapper.rb:49:in `serve&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"39\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/journey/router.rb:43:in
        `block in serve&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"40\"
        href=\"#\">actionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in
        `each&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"41\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/journey/router.rb:30:in `serve&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"42\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/routing/route_set.rb:802:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"43\" href=\"#\">railties (4.2.0) lib/rails/engine.rb:518:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"44\" href=\"#\">railties
        (4.2.0) lib/rails/railtie.rb:194:in `public_send&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"45\" href=\"#\">railties (4.2.0) lib/rails/railtie.rb:194:in
        `method_missing&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"46\"
        href=\"#\">actionpack (4.2.0) lib/action_dispatch/routing/mapper.rb:51:in
        `serve&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"47\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/journey/router.rb:43:in `block in serve&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"48\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/journey/router.rb:30:in `each&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"49\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in
        `serve&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"50\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/routing/route_set.rb:802:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"51\" href=\"#\">rack (1.6.1) lib/rack/etag.rb:24:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"52\" href=\"#\">rack
        (1.6.1) lib/rack/conditionalget.rb:25:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"53\" href=\"#\">rack (1.6.1) lib/rack/head.rb:13:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"54\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/params_parser.rb:27:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"55\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/flash.rb:260:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"56\" href=\"#\">rack (1.6.1) lib/rack/session/abstract/id.rb:225:in
        `context&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"57\" href=\"#\">rack
        (1.6.1) lib/rack/session/abstract/id.rb:220:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"58\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/cookies.rb:560:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"59\" href=\"#\">activerecord
        (4.2.0) lib/active_record/query_cache.rb:36:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"60\" href=\"#\">activerecord (4.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"61\" href=\"#\">activerecord
        (4.2.0) lib/active_record/migration.rb:378:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"62\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:29:in
        `block in call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"63\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:88:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"64\" href=\"#\">activesupport (4.2.0)
        lib/active_support/callbacks.rb:88:in `_run_callbacks&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"65\" href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:734:in
        `_run_call_callbacks&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"66\"
        href=\"#\">activesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"67\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/callbacks.rb:27:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"68\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/reloader.rb:73:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"69\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/middleware/remote_ip.rb:78:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"70\" href=\"#\">actionpack (4.2.0)
        lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"71\" href=\"#\">web-console (2.1.2)
        lib/web_console/middleware.rb:37:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"72\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"73\" href=\"#\">railties
        (4.2.0) lib/rails/rack/logger.rb:38:in `call_app&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"74\" href=\"#\">railties (4.2.0) lib/rails/rack/logger.rb:20:in
        `block in call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"75\"
        href=\"#\">activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in
        `block in tagged&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"76\"
        href=\"#\">activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in
        `tagged&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"77\" href=\"#\">activesupport
        (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"78\" href=\"#\">railties (4.2.0) lib/rails/rack/logger.rb:20:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"79\" href=\"#\">actionpack
        (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"80\" href=\"#\">rack (1.6.1) lib/rack/methodoverride.rb:22:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"81\" href=\"#\">rack
        (1.6.1) lib/rack/runtime.rb:18:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"82\" href=\"#\">activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"83\" href=\"#\">rack
        (1.6.1) lib/rack/lock.rb:17:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"84\" href=\"#\">actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"85\" href=\"#\">rack
        (1.6.1) lib/rack/sendfile.rb:113:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"86\" href=\"#\">railties (4.2.0) lib/rails/engine.rb:518:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"87\" href=\"#\">railties
        (4.2.0) lib/rails/application.rb:164:in `call&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"88\" href=\"#\">rack (1.6.1) lib/rack/lock.rb:17:in `call&#39;</a><br><a
        class=\"trace-frames\" data-frame-id=\"89\" href=\"#\">rack (1.6.1) lib/rack/content_length.rb:15:in
        `call&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"90\" href=\"#\">rack
        (1.6.1) lib/rack/handler/webrick.rb:89:in `service&#39;</a><br><a class=\"trace-frames\"
        data-frame-id=\"91\" href=\"#\">/home/dlweber/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in
        `service&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"92\" href=\"#\">/home/dlweber/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in
        `run&#39;</a><br><a class=\"trace-frames\" data-frame-id=\"93\" href=\"#\">/home/dlweber/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in
        `block in start_thread&#39;</a><br></code></pre>\n    </div>\n\n  <script
        type=\"text/javascript\">\n    var traceFrames = document.getElementsByClassName('trace-frames');\n
        \   var selectedFrame, currentSource = document.getElementById('frame-source-0');\n\n
        \   // Add click listeners for all stack frames\n    for (var i = 0; i < traceFrames.length;
        i++) {\n      traceFrames[i].addEventListener('click', function(e) {\n        e.preventDefault();\n
        \       var target = e.target;\n        var frame_id = target.dataset.frameId;\n\n
        \       if (selectedFrame) {\n          selectedFrame.className = selectedFrame.className.replace(\"selected\",
        \"\");\n        }\n\n        target.className += \" selected\";\n        selectedFrame
        = target;\n\n        // Change the extracted source code\n        changeSourceExtract(frame_id);\n
        \     });\n\n      function changeSourceExtract(frame_id) {\n        var el
        = document.getElementById('frame-source-' + frame_id);\n        if (currentSource
        && el) {\n          currentSource.className += \" hidden\";\n          el.className
        = el.className.replace(\" hidden\", \"\");\n          currentSource = el;\n
        \       }\n      }\n    }\n  </script>\n</div>\n\n  \n\n<h2 style=\"margin-top:
        30px\">Request</h2>\n<p><b>Parameters</b>:</p> <pre>{&quot;id&quot;=&gt;&quot;e9/9e/78/fb/e99e78fb-3260-4dee-a06f-b7f53b3e2f0d&quot;}</pre>\n\n<div
        class=\"details\">\n  <div class=\"summary\"><a href=\"#\" onclick=\"return
        toggleSessionDump()\">Toggle session dump</a></div>\n  <div id=\"session_dump\"
        style=\"display:none\"><pre></pre></div>\n</div>\n\n<div class=\"details\">\n
        \ <div class=\"summary\"><a href=\"#\" onclick=\"return toggleEnvDump()\">Toggle
        env dump</a></div>\n  <div id=\"env_dump\" style=\"display:none\"><pre>GATEWAY_INTERFACE:
        &quot;CGI/1.1&quot;\nHTTP_ACCEPT: &quot;application/x-ld+json&quot;\nHTTP_ACCEPT_ENCODING:
        &quot;gzip, deflate&quot;\nREMOTE_ADDR: &quot;127.0.0.1&quot;\nREMOTE_HOST:
        &quot;127.0.0.1&quot;\nSERVER_NAME: &quot;localhost&quot;\nSERVER_PROTOCOL:
        &quot;HTTP/1.1&quot;</pre></div>\n</div>\n\n<h2 style=\"margin-top: 30px\">Response</h2>\n<p><b>Headers</b>:</p>
        <pre>None</pre>\n\n</div>\n\n\n</body>\n</html>\n<div id=\"console\"\n  data-remote-path='console/repl_sessions/ddcd0dcf0116a2e4d6e5bc649a991569'\n
        \ data-initial-prompt='>> '>\n</div>\n\n\n<script type=\"text/javascript\">\n(function()
        {\n  // DOM helpers\nfunction hasClass(el, className) {\n  var regex = new
        RegExp('(?:^|\\\\s)' + className + '(?!\\\\S)', 'g');\n  return el.className.match(regex);\n}\n\nfunction
        addClass(el, className) {\n  el.className += \" \" + className;\n}\n\nfunction
        removeClass(el, className) {\n  var regex = new RegExp('(?:^|\\\\s)' + className
        + '(?!\\\\S)', 'g');\n  el.className = el.className.replace(regex, '');\n}\n\nfunction
        removeAllChildren(el) {\n  while (el.firstChild) {\n    el.removeChild(el.firstChild);\n
        \ }\n}\n\nfunction escapeHTML(html) {\n  return html\n    .replace(/&/g, '&amp;')\n
        \   .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g,
        '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/`/g, '&#x60;');\n}\n\n//
        Add CSS styles dynamically. This probably doesnt work for IE <8.\nvar style
        = document.createElement('style');\nstyle.type = 'text/css';\nstyle.innerHTML
        = \"#console { position: fixed; left: 0; bottom: 0; width: 100%; height: 148px;
        border: 1px solid; padding: 0 0 4px 0; overflow: none; margin: 0; background:
        none repeat scroll 0% 0% #333; z-index: 9999; }\\n#console div.console-inner
        { font-family: monospace; font-size: 11px; height: 100%; overflow: auto; background:
        #333; border: 0; padding: 0; margin: 0; }\\n#console div.console-prompt-box
        { color: #FFF; }\\n#console pre.console-message { color: #1AD027; margin:
        0; border: 0; white-space: pre-wrap; background-color: #333; padding: 0; }\\n#console
        div.console-focus span.console-cursor { background: #FEFEFE; color: #333;
        font-weight: bold; }\\n#console div#resizer { width: 100%; height: 4px; cursor:
        ns-resize; }\\n#console input#clipboard { height: 0px; padding: 0px; margin:
        0px; width: 0px; margin-left: -1000px; }\\n#console span.console-prompt-label
        { display: inline; color: #FFF; background: none repeat scroll 0% 0% #333;
        border: 0; padding: 0; }\\n#console pre.console-prompt-display { display:
        inline; color: #FFF; background: none repeat scroll 0% 0% #333; border: 0;
        padding: 0; }\\n\"\n;\ndocument.getElementsByTagName('head')[0].appendChild(style);\n\n/**\n
        * Constructor for command storage.\n * It uses localStorage if available.
        Otherwise fallback to normal JS array.\n */\nfunction CommandStorage() {\n
        \ this.previousCommands = [];\n  var previousCommandOffset = 0;\n  var hasLocalStorage
        = typeof window.localStorage !== 'undefined';\n  var STORAGE_KEY = \"web_console_previous_commands\";\n
        \ var MAX_STORAGE = 100;\n\n  if (hasLocalStorage) {\n    this.previousCommands
        = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];\n    previousCommandOffset
        = this.previousCommands.length;\n  }\n\n  this.addCommand = function(command)
        {\n    previousCommandOffset = this.previousCommands.push(command);\n\n    if
        (previousCommandOffset > MAX_STORAGE) {\n      this.previousCommands.splice(0,
        1);\n      previousCommandOffset = MAX_STORAGE;\n    }\n\n    if (hasLocalStorage)
        {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.previousCommands));\n
        \   }\n  };\n\n  this.navigate = function(offset) {\n    previousCommandOffset
        += offset;\n\n    if (previousCommandOffset < 0) {\n      previousCommandOffset
        = -1;\n      return null;\n    }\n\n    if (previousCommandOffset >= this.previousCommands.length)
        {\n      previousCommandOffset = this.previousCommands.length;\n      return
        null;\n    }\n\n    return this.previousCommands[previousCommandOffset];\n
        \ }\n}\n\n// HTML strings for dynamic elements.\nvar consoleInnerHtml = \"<div
        id=\\'resizer\\'><\\/div>\\n<div class=\\'console-inner\\'><\\/div>\\n<input
        id=\\'clipboard\\' type=\\'text\\'>\\n\"\n;\nvar promptBoxHtml = \"<span class=\\'console-prompt-label\\'><\\/span>\\n<pre
        class=\\'console-prompt-display\\'><\\/pre>\\n\"\n;\n\n// REPLConsole Constructor\nfunction
        REPLConsole(config) {\n  this.commandStorage = new CommandStorage();\n  this.prompt
        = config && config.promptLabel ? config.promptLabel : ' >>';\n  this.commandHandle
        = config && config.commandHandle ? config.commandHandle : function() { return
        this; }\n}\n\n\nREPLConsole.prototype.install = function(container) {\n  var
        _this = this;\n\n  document.onkeydown = function(ev) {\n    if (_this.focused)
        { _this.onKeyDown(ev); }\n  };\n\n  document.onkeypress = function(ev) {\n
        \   if (_this.focused) { _this.onKeyPress(ev); }\n  };\n\n  document.addEventListener('mousedown',
        function(ev) {\n    var el = ev.target || ev.srcElement;\n\n    if (el) {\n
        \     do {\n        if (el === container) {\n          _this.focus();\n          return;\n
        \       }\n      } while (el = el.parentNode);\n\n      _this.blur();\n    }\n
        \ });\n\n  // Render the console.\n  container.innerHTML = consoleInnerHtml;\n\n
        \ // Make the console resizable.\n  document.getElementById('resizer').addEventListener('mousedown',
        function(ev) {\n    var startY                   = ev.clientY;\n    var startHeight
        \             = parseInt(document.defaultView.getComputedStyle(container).height,
        10);\n    var consoleInner             = document.getElementsByClassName('console-inner')[0];\n
        \   var innerScrollTopStart      = consoleInner.scrollTop;\n    var innerClientHeightStart
        \  = consoleInner.clientHeight;\n\n    var doDrag = function(e) {\n      container.style.height
        = (startHeight + startY - e.clientY) + 'px';\n      consoleInner.scrollTop
        = innerScrollTopStart + (innerClientHeightStart - consoleInner.clientHeight);\n
        \   };\n\n    var stopDrag = function(e) {\n      document.documentElement.removeEventListener('mousemove',
        doDrag, false);\n      document.documentElement.removeEventListener('mouseup',
        stopDrag, false);\n    };\n\n    document.documentElement.addEventListener('mousemove',
        doDrag, false);\n    document.documentElement.addEventListener('mouseup',
        stopDrag, false);\n  });\n\n  // Initialize\n  this.inner = container.getElementsByClassName('console-inner')[0];\n
        \ this.clipboard = document.getElementById('clipboard');\n  this.newPromptBox();\n};\n\nREPLConsole.prototype.focus
        = function() {\n  if (! this.focused) {\n    this.focused = true;\n    if
        (! hasClass(this.inner, \"console-focus\")) {\n      addClass(this.inner,
        \"console-focus\");\n    }\n    this.scrollToBottom();\n  }\n};\n\nREPLConsole.prototype.blur
        = function() {\n  this.focused = false;\n  removeClass(this.inner, \"console-focus\");\n};\n\n/**\n
        * Add a new empty prompt box to the console.\n */\nREPLConsole.prototype.newPromptBox
        = function() {\n  // Remove the caret from previous prompt display if any.\n
        \ if (this.promptDisplay) {\n    this.removeCaretFromPrompt();\n  }\n\n  var
        promptBox = document.createElement('div');\n  promptBox.className = \"console-prompt-box\";\n
        \ promptBox.innerHTML = promptBoxHtml;\n  this.promptLabel = promptBox.getElementsByClassName('console-prompt-label')[0];\n
        \ this.promptDisplay = promptBox.getElementsByClassName('console-prompt-display')[0];\n
        \ // Render the prompt box\n  this.setInput(\"\");\n  this.promptLabel.innerHTML
        = this.prompt;\n  this.inner.appendChild(promptBox);\n  this.scrollToBottom();\n};\n\n/**\n
        * Remove the caret from the prompt box,\n * mainly before adding a new prompt
        box.\n * For simplicity, just re-render the prompt box\n * with caret position
        -1.\n */\nREPLConsole.prototype.removeCaretFromPrompt = function() {\n  this.setInput(this._input,
        -1);\n};\n\nREPLConsole.prototype.setInput = function(input, caretPos) {\n
        \ this._caretPos = caretPos === undefined ? input.length : caretPos;\n  this._input
        = input;\n  this.renderInput();\n};\n\n/**\n * Add some text to the existing
        input.\n */\nREPLConsole.prototype.addToInput = function(val, caretPos) {\n
        \ caretPos = caretPos || this._caretPos;\n  var before = this._input.substring(0,
        caretPos);\n  var after = this._input.substring(caretPos, this._input.length);\n
        \ var newInput =  before + val + after;\n  this.setInput(newInput, caretPos
        + val.length);\n};\n\n/**\n * Render the input prompt. This is called whenever\n
        * the user input changes, sometimes not very efficient.\n */\nREPLConsole.prototype.renderInput
        = function() {\n  // Clear the current input.\n  removeAllChildren(this.promptDisplay);\n\n
        \ var promptCursor = document.createElement('span');\n  promptCursor.className
        = \"console-cursor\";\n  var before, current, after;\n\n  if (this._caretPos
        < 0) {\n    before = this._input;\n    current = after = \"\";\n  } else if
        (this._caretPos === this._input.length) {\n    before = this._input;\n    current
        = \"\\u00A0\";\n    after = \"\";\n  } else {\n    before = this._input.substring(0,
        this._caretPos);\n    current = this._input.charAt(this._caretPos);\n    after
        = this._input.substring(this._caretPos + 1, this._input.length);\n  }\n\n
        \ this.promptDisplay.appendChild(document.createTextNode(before));\n  promptCursor.appendChild(document.createTextNode(current));\n
        \ this.promptDisplay.appendChild(promptCursor);\n  this.promptDisplay.appendChild(document.createTextNode(after));\n};\n\nREPLConsole.prototype.writeOutput
        = function(output) {\n  var consoleMessage = document.createElement('pre');\n
        \ consoleMessage.className = \"console-message\";\n  consoleMessage.innerHTML
        = escapeHTML(output);\n  this.inner.appendChild(consoleMessage);\n  this.newPromptBox();\n};\n\nREPLConsole.prototype.onEnterKey
        = function() {\n  var input = this._input;\n\n  if(input != \"\" && input
        !== undefined) {\n    this.commandStorage.addCommand(input);\n  }\n\n  this.commandHandle(input);\n};\n\nREPLConsole.prototype.onNavigateHistory
        = function(offset) {\n  var command = this.commandStorage.navigate(offset)
        || \"\";\n  this.setInput(command);\n};\n\n/**\n * Handle control keys like
        up, down, left, right.\n */\nREPLConsole.prototype.onKeyDown = function(ev)
        {\n  switch (ev.keyCode) {\n    case 13:\n      // Enter key\n      this.onEnterKey();\n
        \     ev.preventDefault();\n      break;\n    case 80:\n      // Ctrl-P\n
        \     if (! ev.ctrlKey) break;\n    case 38:\n      // Up arrow\n      this.onNavigateHistory(-1);\n
        \     ev.preventDefault();\n      break;\n    case 78:\n      // Ctrl-N\n
        \     if (! ev.ctrlKey) break;\n    case 40:\n      // Down arrow\n      this.onNavigateHistory(1);\n
        \     ev.preventDefault();\n      break;\n    case 37:\n      // Left arrow\n
        \     var caretPos = this._caretPos > 0 ? this._caretPos - 1 : this._caretPos;\n
        \     this.setInput(this._input, caretPos);\n      ev.preventDefault();\n
        \     break;\n    case 39:\n      // Right arrow\n      var length = this._input.length;\n
        \     var caretPos = this._caretPos < length ? this._caretPos + 1 : this._caretPos;\n
        \     this.setInput(this._input, caretPos);\n      ev.preventDefault();\n
        \     break;\n    case 8:\n      // Delete\n      this.deleteAtCurrent();\n
        \     ev.preventDefault();\n      break;\n    default:\n      break;\n  }\n\n
        \ if (ev.ctrlKey || ev.metaKey) {\n    // Set focus to our clipboard in case
        they hit the \"v\" key\n    this.clipboard.focus();\n    if (ev.keyCode ==
        86) {\n      // Pasting to clipboard doesn't happen immediately,\n      //
        so we have to wait for a while to get the pasted text.\n      var _this =
        this;\n      setTimeout(function() {\n        _this.addToInput(_this.clipboard.value);\n
        \       _this.clipboard.value = \"\";\n        _this.clipboard.blur();\n      },
        10);\n    }\n  }\n\n  ev.stopPropagation();\n};\n\n/**\n * Handle input key
        press.\n */\nREPLConsole.prototype.onKeyPress = function(ev) {\n  // Only
        write to the console if it's a single key press.\n  if (ev.ctrlKey || ev.metaKey)
        { return; }\n  var keyCode = ev.keyCode || ev.which;\n  this.insertAtCurrent(String.fromCharCode(keyCode));\n
        \ ev.stopPropagation();\n  ev.preventDefault();\n};\n\n/**\n * Delete a character
        at the current position.\n */\nREPLConsole.prototype.deleteAtCurrent = function()
        {\n  if (this._caretPos > 0) {\n    var caretPos = this._caretPos - 1;\n    var
        before = this._input.substring(0, caretPos);\n    var after = this._input.substring(this._caretPos,
        this._input.length);\n    this.setInput(before + after, caretPos);\n  }\n};\n\n/**\n
        * Insert a character at the current position.\n */\nREPLConsole.prototype.insertAtCurrent
        = function(char) {\n  var before = this._input.substring(0, this._caretPos);\n
        \ var after = this._input.substring(this._caretPos, this._input.length);\n
        \ this.setInput(before + char + after, this._caretPos + 1);\n};\n\nREPLConsole.prototype.scrollToBottom
        = function() {\n  this.inner.scrollTop = this.inner.scrollHeight;\n};\n\nwindow.REPLConsole
        = REPLConsole;\n\n}).call(this);\n</script>\n\n<script type=\"text/javascript\">\n(function()
        {\n  var consoleDiv = document.getElementById('console');\nvar replConsole
        = new REPLConsole({\n  promptLabel: consoleDiv.dataset.initialPrompt,\n  commandHandle:
        function(line) {\n    var _this = this;\n    var xhr = new XMLHttpRequest();\n
        \   var url = consoleDiv.dataset.remotePath;\n    var params = \"input=\"
        + encodeURIComponent(line);\n\n    xhr.open(\"PUT\", url, true);\n    xhr.setRequestHeader(\"Content-Type\",
        \"application/x-www-form-urlencoded\");\n    xhr.setRequestHeader(\"X-Requested-With\",
        \"XMLHttpRequest\");\n    xhr.send(params);\n\n    xhr.onreadystatechange
        = function() {\n      if (xhr.readyState === 4) {\n        var response =
        JSON.parse(xhr.responseText);\n        _this.writeOutput(response.output);\n
        \     }\n    }\n  }\n});\n\nreplConsole.install(consoleDiv);\n\n}).call(this);\n</script>\n\n\n
        \ <script type=\"text/javascript\">\n(function() {\n  // Try intercept traces
        links in Rails 4.2.\nvar traceFrames = document.getElementsByClassName('trace-frames');\nvar
        selectedFrame, currentSource = document.getElementById('frame-source-0');\n\n//
        Add click listeners for all stack frames\nfor (var i = 0; i < traceFrames.length;
        i++) {\n  traceFrames[i].addEventListener('click', function(e) {\n    e.preventDefault();\n
        \   var target = e.target;\n    var frameId = target.dataset.frameId;\n\n
        \   // Change the binding of the console.\n    changeBinding(frameId, function()
        {\n      if (selectedFrame) {\n        selectedFrame.className = selectedFrame.className.replace(\"selected\",
        \"\");\n      }\n\n      target.className += \" selected\";\n      selectedFrame
        = target;\n    });\n\n    // Change the extracted source code\n    changeSourceExtract(frameId);\n
        \ });\n}\n\nfunction changeBinding(frameId, callback) {\n  var consoleEl =
        document.getElementById('console');\n  if (! consoleEl) { return; }\n  var
        url = consoleEl.dataset.remotePath + \"/trace\";\n  var params = \"frame_id=\"
        + encodeURIComponent(frameId);\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"POST\",
        url, true);\n  xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n
        \ xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n  xhr.send(params);\n
        \ xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4) {\n
        \     callback();\n    }\n  }\n}\n\nfunction changeSourceExtract(frameId)
        {\n  var el = document.getElementById('frame-source-' + frameId);\n  if (currentSource
        && el) {\n    currentSource.className += \" hidden\";\n    el.className =
        el.className.replace(\" hidden\", \"\");\n    currentSource = el;\n  }\n}\n\n//
        Push the error page body upwards the size of the console.\n//\n// While, I
        wouldn't like to do that on every custom page (so I don't screw\n// user's
        layouts), I think a lot of developers want to see all of the content\n// on
        the default Rails error page.\n//\n// Since it's quite special as is now,
        being a bit more special in the name of\n// better user experience, won't
        hurt.\ndocument.addEventListener('DOMContentLoaded', function() {\n  var consoleElement
        = document.getElementById('console');\n  var resizerElement = document.getElementById('resizer')\n
        \ var containerElement = document.getElementById('container');\n\n  function
        setContainerElementBottomMargin(pixels) {\n    containerElement.style.marginBottom
        = pixels + 'px';\n  }\n\n  var currentConsoleElementHeight = consoleElement.offsetHeight;\n
        \ setContainerElementBottomMargin(currentConsoleElementHeight);\n\n  resizerElement.addEventListener('mousedown',
        function(event) {\n    function recordConsoleElementHeight(event) {\n      resizerElement.removeEventListener('mouseup',
        recordConsoleElementHeight);\n\n      var currentConsoleElementHeight = consoleElement.offsetHeight;\n
        \     setContainerElementBottomMargin(currentConsoleElementHeight);\n    }\n\n
        \   resizerElement.addEventListener('mouseup', recordConsoleElementHeight);\n
        \ });\n});\n\n}).call(this);\n</script>\n\n"
    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:36 GMT
- request:
    method: delete
    uri: http://localhost:3000/annotations/e9%2F9e%2F78%2Ffb%2Fe99e78fb-3260-4dee-a06f-b7f53b3e2f0d
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*; q=0.5, application/xml"
      Accept-Encoding:
      - gzip, deflate
      User-Agent:
      - Ruby
  response:
    status:
      code: 204
      message: 'No Content '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Location:
      - http://localhost:3000/annotations
      Cache-Control:
      - no-cache
      X-Request-Id:
      - dde9e61f-9ddf-45a9-aec6-d5e8735498d1
      X-Runtime:
      - '0.169867'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Mon, 11 May 2015 21:27:37 GMT
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=enVZNWFCSlIvRjdJZ1BuVjY5Rjg2aDFsa3RZeDRmZndqZXQ4OWM4UEUrSEI0MkVTUDJHVis3ZHlGeWJrdkYxYWY4bmd3RVQrUTVOU2s2L0kyWnBFNkd5OU91K1lHRS85bzc1YTVTbHhybnVQUzFLbUJmVzZDdnBwZTYrRE1rSVpaaVg1SFMrQXdES1dRb20rUS92NzE5QUtqU1hjNkNHWmlHYjNXYWsraERzbUkxenU2N0lpeThRM2FWRDdENVJFLS1JL2F3TjU3R2RuMk8rRkUrRWw2WFlRPT0%3D--7fef52fab54fc2154e9214fcb19e126ec3362c5a;
        path=/; HttpOnly
      - request_method=DELETE; path=/
    body:
      encoding: UTF-8
      string: ''
    http_version: 
  recorded_at: Mon, 11 May 2015 21:27:37 GMT
recorded_with: VCR 2.9.3
