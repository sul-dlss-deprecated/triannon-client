---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/auth/client_identity
    body:
      encoding: UTF-8
      string: '{"clientId":"clientA","clientSecret":"secretA"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"3d3404c632c6fa439edf0fc410ba0b25"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 7833c7db-de04-4797-874b-810301d09a81
      X-Runtime:
      - '0.171871'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 20:47:18 GMT
      Content-Length:
      - '186'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=dXVWSFdRWWlTa0ZWTkVubTdQYkVUZ3lucTV3UnpnaUVUanBNS1VaT1dHbkdmbTBUaUgyUTVXWSt5dCs2VXhyOThrV2g5NjVqNlczcm1RNnpiQUdPdVQvUmtKU3ZNTThCL2QweW1DNjVTVHd4Ky8vSnFnU2oyVythUWdQTlBhdFNTR29LcDZRMTZDNS9sdFpPaVdIZWdxWnlCd25ZQ2w4RGdKN3BSbGF3ditPdlcvN0JpcUt5TFpVSEhSb0EwMzV0ZFIzcnJUM2F3cmZ4YXFtNDB4Ri90eE5VLzdtWTRIV2xzLzhPTHdJNkNsRm9lc0U3em1Vb3dsRjJ0VGRDb01BS2VxWDAxZWFSRm5BRzdwSUxiV2VydGZ4U2xta2kzYUNpQXpCbnFMaGNvNzB6dkxyajM2bzhrc3dOUXA4Um5DakF1SnpiNE4waCtCaG94cG9zOHlMTXAySGtTQUg3UmRIaXc2K2NpK1NNWFBaMjFFZFc5S0h3QkNsa1NSWDRkaURkUGpCejZubHBxOTB6R0VEemlYRU1VaXpuZkdIUExBLzNtcjhpS05YVkZJSnh5LzBRaHh4NElZa2pjMjVTNE00eFRvOGg5VEJhRitzYWRMZGVjTlNhMGdWOTE4cW1sRWhESi9KTlIxYytvWGM9LS1VZll0OGJObHI4S25WS2xvb3BiNmN3PT0%3D--cbfc6190682614d4c65e70603d9b46852f81aede;
        path=/; HttpOnly
      - request_method=POST; path=/
    body:
      encoding: UTF-8
      string: '{"authorizationCode":"enBtVytoNi9RT3BWNzZOOUxiRFRCd2JIbGM5RUh3WGxWelVhLzVKSXR4Rkl2b3pHK0J6UjBxRlVlS3g0V04vby0tS2ZmaUcrYVNSL01QZjhRSWRBTHI3QT09--2ae93ae26526c504cb787fd77b1cf2efb712375a"}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 20:47:18 GMT
- request:
    method: post
    uri: http://localhost:3000/auth/login?code=enBtVytoNi9RT3BWNzZOOUxiRFRCd2JIbGM5RUh3WGxWelVhLzVKSXR4Rkl2b3pHK0J6UjBxRlVlS3g0V04vby0tS2ZmaUcrYVNSL01QZjhRSWRBTHI3QT09--2ae93ae26526c504cb787fd77b1cf2efb712375a
    body:
      encoding: UTF-8
      string: '{"userId":"","workgroups":"org:wg-A, org:wg-B"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Cookie:
      - _internal_session=dXVWSFdRWWlTa0ZWTkVubTdQYkVUZ3lucTV3UnpnaUVUanBNS1VaT1dHbkdmbTBUaUgyUTVXWSt5dCs2VXhyOThrV2g5NjVqNlczcm1RNnpiQUdPdVQvUmtKU3ZNTThCL2QweW1DNjVTVHd4Ky8vSnFnU2oyVythUWdQTlBhdFNTR29LcDZRMTZDNS9sdFpPaVdIZWdxWnlCd25ZQ2w4RGdKN3BSbGF3ditPdlcvN0JpcUt5TFpVSEhSb0EwMzV0ZFIzcnJUM2F3cmZ4YXFtNDB4Ri90eE5VLzdtWTRIV2xzLzhPTHdJNkNsRm9lc0U3em1Vb3dsRjJ0VGRDb01BS2VxWDAxZWFSRm5BRzdwSUxiV2VydGZ4U2xta2kzYUNpQXpCbnFMaGNvNzB6dkxyajM2bzhrc3dOUXA4Um5DakF1SnpiNE4waCtCaG94cG9zOHlMTXAySGtTQUg3UmRIaXc2K2NpK1NNWFBaMjFFZFc5S0h3QkNsa1NSWDRkaURkUGpCejZubHBxOTB6R0VEemlYRU1VaXpuZkdIUExBLzNtcjhpS05YVkZJSnh5LzBRaHh4NElZa2pjMjVTNE00eFRvOGg5VEJhRitzYWRMZGVjTlNhMGdWOTE4cW1sRWhESi9KTlIxYytvWGM9LS1VZll0OGJObHI4S25WS2xvb3BiNmN3PT0%3D--cbfc6190682614d4c65e70603d9b46852f81aede;
        request_method=POST
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - text/plain; charset=utf-8
      Cache-Control:
      - no-cache
      X-Request-Id:
      - 43450624-dcd7-418a-926a-4558a5c80ce5
      X-Runtime:
      - '0.166457'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 20:47:18 GMT
      Content-Length:
      - '0'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=dHFMdWRmL3RidE00U1lnS0Nvb1BMYWptdTZya0Uvc0EyYnJWakI2bzdiYUZOWm9XOVFEa2k1b1Z1OHU0N09IQUxaZzh6LzhwS2VBa2dISlNiRmFBQnZObmNZS0EyTnhmRlJzbjhtSWlSTHVWSWI5dlliZFlUTUNoK3JmY3hjdHg5YTVOUHFXYzlGZWZtN0ZPNHFybHFxd0FMZnVFWEl6ZEJBR2RNeGR2and0ZGVoczZqL3BHUTNzWjdMRnArd0k2TDU3bDVMWWtWK1ByMUlqRVRSald0Q1p5VUFjMFJldzVkcGNYUXlqT01kRENGK0xEbWllU2hOLzhHdktFYUp3VEdHTmlPZmtPUDRTaDVLdC9nc2hYUEVIQ0RzamdYWmxxU21VcVZ4Wi9QcTJjQUs2M3paK05Vci94UVR4UzN4SllmSk1EWDNmVzhHVExpVzk5ekxQZXFrZXBuWkVHWGpiNDRrU1hSNmVFMXI4TUJpb2xTWXJoZ0FCYy91SEc2dDVWZXEvQTBvOXowRDJ2YVhWRDNtMjVaWm90bGFsQldEWlNKSTB2NXFmMkpOWnV4S0lwak9TdkExQWhRdlI1VGIvUVNyTmVpYUYzQ3g2T2pzdStXN3dKQ0dxWWJYL1ZZRkJHRnpUVDFjNnorZHBxcjVEcTBCdk91VVM3YnllSU4xMmREWmtpdlZMNExpcU1jbS9uWmxhbmMrYzVYejFIUWpYMDFHQS9IQks0VjBnY0tJSnp0dlhrY2VaWklVcnRvTTBqLS1uV2t1VzFwSUdQcUVibW03a1dnOXFBPT0%3D--59662ee5fe591471e0006cbd6889193cdbf2e346;
        path=/; HttpOnly
      - login_user=; path=/
    body:
      encoding: UTF-8
      string: ''
    http_version: 
  recorded_at: Fri, 31 Jul 2015 20:47:18 GMT
- request:
    method: get
    uri: http://localhost:3000/auth/access_token?code=enBtVytoNi9RT3BWNzZOOUxiRFRCd2JIbGM5RUh3WGxWelVhLzVKSXR4Rkl2b3pHK0J6UjBxRlVlS3g0V04vby0tS2ZmaUcrYVNSL01QZjhRSWRBTHI3QT09--2ae93ae26526c504cb787fd77b1cf2efb712375a
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/ld+json
      Cookie:
      - _internal_session=dHFMdWRmL3RidE00U1lnS0Nvb1BMYWptdTZya0Uvc0EyYnJWakI2bzdiYUZOWm9XOVFEa2k1b1Z1OHU0N09IQUxaZzh6LzhwS2VBa2dISlNiRmFBQnZObmNZS0EyTnhmRlJzbjhtSWlSTHVWSWI5dlliZFlUTUNoK3JmY3hjdHg5YTVOUHFXYzlGZWZtN0ZPNHFybHFxd0FMZnVFWEl6ZEJBR2RNeGR2and0ZGVoczZqL3BHUTNzWjdMRnArd0k2TDU3bDVMWWtWK1ByMUlqRVRSald0Q1p5VUFjMFJldzVkcGNYUXlqT01kRENGK0xEbWllU2hOLzhHdktFYUp3VEdHTmlPZmtPUDRTaDVLdC9nc2hYUEVIQ0RzamdYWmxxU21VcVZ4Wi9QcTJjQUs2M3paK05Vci94UVR4UzN4SllmSk1EWDNmVzhHVExpVzk5ekxQZXFrZXBuWkVHWGpiNDRrU1hSNmVFMXI4TUJpb2xTWXJoZ0FCYy91SEc2dDVWZXEvQTBvOXowRDJ2YVhWRDNtMjVaWm90bGFsQldEWlNKSTB2NXFmMkpOWnV4S0lwak9TdkExQWhRdlI1VGIvUVNyTmVpYUYzQ3g2T2pzdStXN3dKQ0dxWWJYL1ZZRkJHRnpUVDFjNnorZHBxcjVEcTBCdk91VVM3YnllSU4xMmREWmtpdlZMNExpcU1jbS9uWmxhbmMrYzVYejFIUWpYMDFHQS9IQks0VjBnY0tJSnp0dlhrY2VaWklVcnRvTTBqLS1uV2t1VzFwSUdQcUVibW03a1dnOXFBPT0%3D--59662ee5fe591471e0006cbd6889193cdbf2e346;
        login_user=
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - '["application/ld+json"]; charset=utf-8'
      Etag:
      - W/"06feafd9d2ea5213ec008d3416405191"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - ff3e5530-8f55-487a-b04c-876d3e867ccd
      X-Runtime:
      - '0.326625'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 20:47:18 GMT
      Content-Length:
      - '306'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=b3c5MnlwTG4vMDg0ak5Ma0JtcnN2SnM2cVVhVFBVajJEancwYXVXWmM2bGxsS3c4Qk1Sd3QwMWI2Qk12WjRmdkgrTzVTdUlRQmFLbHpzcGplVXduT1VNYXA4c21WSFVQK3J0UlF1U0lXeVAzcVQ2NStNVjFENi9LNTI1eENUTDRtZjlQeW1jVXk3Y1RKWnVxRXhIRnczb1doV09WL0lFUUI1NTFhdW9lRTVlVmpQUzI2aGZUbzNVd1F1OUFVOVZ1MGJPZTJuY0R3Q3EvUmo1M2tGZmZxY09CMkdSUmthSGFqbHNpM2Q1eVF1TjNXbUZ6VWJwbGFmLyt3WmMwTU5KbXozOHdIVXpwY2c2ZFgzUFVoUFpvS0pKbGNXemc5MnlSZFNwQ3VQUXNMVXRkR3oxbzlTQ1h3Rm1xbzlWN0RHQjR0ZW1GMnVMTVBlWDkrdFNITUJ1MjZsRHE3NWtJZ25wMWRHc2dhVmk0b0ZmdXZKaW9HRURMWHJMQVhvTDNjVzBuZXcwdXpQRXpBSXVmOHV1aEcySGMwNjgrYktTQmQ0aTJGRXNrL3hXOU15L3IxMXNSWmhvbG1SLzhMemgyRE94anlQVW5yQUR1bTVUVlQ3bkx4eUNFN3lneHd0SjJhVjF4UkhaL3dxd3JrdE1IdFBWeXFjQlJSTjZpM2E4YVRsaGhwbFBuZE1UYW04WG1wSVVFcm9aQ1FBYTRjbUdJcHEyb3p0UnlQT2RyL2RtejNnK25ob3JtbDMza1lFTjdoVncwdGNlVXcrUmhTL3FXeEttaitRQXBiTk5HRFl4UUJqUFcwNVhobGprOE9vdVVVYzhUU1NYVnlTY21DQ0oxTThOaWp3VHJuelNXNWtNcW5lK3hUUEVTUC92b2wzcTRXOW5iVlBTSXFHd2Q3M0JNdmN4SDhYcktLOFJpTjVRRjRFbUhHK2dPT3NlbXN6WTlCUmhjOC9qaHBqOG9hNFNQQXUvd1VFY3dBY0VHY1M4STh4NWMxOURmNURqSEM3b0w0V1Q5Y3ZGUmtuRlZzaEpraHFpQkJ6UXlESjZOQkhiRFdsdUU5RVVpdnlPa09GakRib0QzYWhZZFo3anFUYXhJNTdtU1UveWNsbzBGdzhneXBxRTNTaGRiS1ZMM3Z0YStrM0tkT1pUS0FaYVdYM1NUdnRPZ3cyK1FWTmlaV2ZjcGtDUkpBRXZxMXhwZGtxRzV0M1Npb0FoL3BwVDlKWlI0RnlFc0hLbHFwcXFRSXJtdUlEUGJaeStSNVVTTk8rR0ZQZkhHWHU4ZC80eHpVbElnV3kyYU4wS0dUcmF1V0k1eDJGdGZZSVF0T1BkdTJWQT0tLWxFOVNNaUx5NVkxSG5TbjEyOWZKWEE9PQ%3D%3D--74336dda7f587918b099b7d0168d5ad018697ffc;
        path=/; HttpOnly
      - login_user=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000
    body:
      encoding: UTF-8
      string: '{"accessToken":"eUpoZ2IwYyt3Q1FET3JZRHBXQ1ZSek01OStmZ0ovUm13bG9CTUZLZWVOMkZRbENwa0RJVWFyMGhtUWZUaVhGOHFGOWVNTWdsakM1bzVJNnpFdjVYRkY3Wkd4R0t5WlpKVnk4aE9NS2FBNDQvbTdidVplVjF4Tk5ubEQxckp1U0UtLUlsNjZPZkcxUFE5NStwTUhuRVBEckE9PQ==--62a7080518014511cb85ad01a11bdf6f47aa8331","tokenType":"Bearer","expiresIn":3600}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 20:47:18 GMT
recorded_with: VCR 2.9.3
