---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/auth/client_identity
    body:
      encoding: UTF-8
      string: '{"clientId":"clientA","clientSecret":"secretA"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"f371b3807cf8e04e9b49e95e3223b1d8"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - af0e4cb4-ef9c-4c5b-9e28-25940b07995d
      X-Runtime:
      - '0.163311'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 00:18:00 GMT
      Content-Length:
      - '186'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=di9sdGxVYUJHYkkzM2VZNDhPbkd1TjJCcGVPckY4bWdpZUFBZkluU2tQQU5oSXBkYzdSQkd3YTRERjIyeC85Q3JJckFJdXlwK3BqR0lFYmh5MUs5VVErWUlWZUNUaXErZXd6L0JLcURpZG1TRUNQb25YU1hPbE50SStEczk2b0lZQ1BpWXhYQlpCYWN2cWdacm9vWHNzWDQvMXdnd0Q5elNZYTVkQWpRdkc1UUdNdDhJOWQ2amFmMCtmMVhXbW1pMmpyZjF5UlFUWWk1WFNqQkVsbkJES2lmblg1cnAyR3drMDdXRW9EcG14TTRKNXBtd0w0UXppTmNiOGtwSlJxZHVBdE1kRzgzNXV0Q3hGRG44aldNNlNBclRFSCtibFZqVDRXRnhKaWd0OGVSdUZwbkNoS2ZBQXhrSzNHYnZDTzV2NjZIZ1NMZENUa2FMTjFENlcvemVlcTdscWpDWXI2eDlpUDF6c0U4UnRKN3dRbERGT3dab3B5NkFvZzFWTU53TUNiQWhaUCtkWC9malArY3dsWDZPOXd1Q1NndHoyRitWd0tzeExDdUEvM2Nnd1RhWjNRcGEzSHNoUC9DclZMd21mRXNYN1owQUgvRE94NmRDYTJnMnlLaU9ac2w0NmdGUUc5OG5zKzU1ajQ9LS1rUHc0ZWptVitwWHptbFJtZ29vR1RBPT0%3D--7e8132705d0a191fc0289ba86f7a090d7a2b4153;
        path=/; HttpOnly
      - request_method=POST; path=/
    body:
      encoding: UTF-8
      string: '{"authorizationCode":"bmo2cGU0bkV2d05vUFdrU2hnV1liUDFJbzdtaS9OeHVhMWZDVDBtVi91UThNYkE4am1vNk5SZDZxNElKczYzRy0tWFE4TkNWa2FMaTJNN3NaU0k4YjByZz09--cc5b0ecb37c2226b5149113c7bd19a9ac7b5d0d8"}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 00:18:00 GMT
- request:
    method: post
    uri: http://localhost:3000/auth/login?code=bmo2cGU0bkV2d05vUFdrU2hnV1liUDFJbzdtaS9OeHVhMWZDVDBtVi91UThNYkE4am1vNk5SZDZxNElKczYzRy0tWFE4TkNWa2FMaTJNN3NaU0k4YjByZz09--cc5b0ecb37c2226b5149113c7bd19a9ac7b5d0d8
    body:
      encoding: UTF-8
      string: '{"userId":"","workgroups":"org:wg-A, org:wg-B"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Cookie:
      - _internal_session=di9sdGxVYUJHYkkzM2VZNDhPbkd1TjJCcGVPckY4bWdpZUFBZkluU2tQQU5oSXBkYzdSQkd3YTRERjIyeC85Q3JJckFJdXlwK3BqR0lFYmh5MUs5VVErWUlWZUNUaXErZXd6L0JLcURpZG1TRUNQb25YU1hPbE50SStEczk2b0lZQ1BpWXhYQlpCYWN2cWdacm9vWHNzWDQvMXdnd0Q5elNZYTVkQWpRdkc1UUdNdDhJOWQ2amFmMCtmMVhXbW1pMmpyZjF5UlFUWWk1WFNqQkVsbkJES2lmblg1cnAyR3drMDdXRW9EcG14TTRKNXBtd0w0UXppTmNiOGtwSlJxZHVBdE1kRzgzNXV0Q3hGRG44aldNNlNBclRFSCtibFZqVDRXRnhKaWd0OGVSdUZwbkNoS2ZBQXhrSzNHYnZDTzV2NjZIZ1NMZENUa2FMTjFENlcvemVlcTdscWpDWXI2eDlpUDF6c0U4UnRKN3dRbERGT3dab3B5NkFvZzFWTU53TUNiQWhaUCtkWC9malArY3dsWDZPOXd1Q1NndHoyRitWd0tzeExDdUEvM2Nnd1RhWjNRcGEzSHNoUC9DclZMd21mRXNYN1owQUgvRE94NmRDYTJnMnlLaU9ac2w0NmdGUUc5OG5zKzU1ajQ9LS1rUHc0ZWptVitwWHptbFJtZ29vR1RBPT0%3D--7e8132705d0a191fc0289ba86f7a090d7a2b4153;
        request_method=POST
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - text/plain; charset=utf-8
      Cache-Control:
      - no-cache
      X-Request-Id:
      - 67f6cc02-5a7c-4362-8edc-4bc8fe590be7
      X-Runtime:
      - '0.163100'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 00:18:00 GMT
      Content-Length:
      - '0'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=azdTVTAwbGkxalJ3TmVGLzMzbTNvekxxTmMvV0NCQ2o0aUduTXB5SmNoMTJSY3pXd0NtNlZUcDM4OGptWW9leTNkbUhYdTJvc2JQa1VlV2lOb3lONkQyanZtSjd4aTlTUVVabXV4clROOXRvcXdRcUdMSGZNQnFsZVk0OHJYT3FzU05sV1ZIb3NKUWk0YmRzOEFjNzlEUUxlS1lxcFNqcnJwNjk3bW9pdWlHTmZkRlQyU2MvWHoycktxNlkwZmxxZ1BEY3oyNHhqczRPcS96c042aUxXVnlZbFMzRE8yYmdsVXNoR25XbWRpNFFncmhXQk5PbE5NV25jZzEvRUlrRGFHTTB4MVRBRmpSdkdaRlNsRS9KaXlyb1lLU0NJeEQzbjdVTjl6ZzFVR0E3NVJQbk1VU2tYVGQwRkVhanJZRHk1SGR0S3hlcEttbGt0dEk2VUNBRjNkSXFEWDNXRkhpUWlhdFpRSEk2WHdTNVlIeFZ5WXhJcG1qYzdSNUEzSDNib1J3dU1MSlpIYnZjU2JBanVTOFFCV0orL0Q1WEYrMUtBS3BLQ0JoT3JGdXIyVHdCSkdSUGVLRjRuWURZSm8weDdVWFQyUmJsWTJVaDB5SkhoYjkvcFdLK1V5TEppcUZOOTI5WVN6ZnFYNTF2TnNWMFU1TGF4UXV2dVkzVnJ2dmVEb3crUENlMXVFY2xSVEV1OHMrVSt0TWRtTk5ZQm9QTEhCRWJRTmllSVM0aHMyU1FSZzNWUnRzRHRaQTlJUXFPLS0rRkY2S0xaQ1Qzd0JqVXVTSnovaXZBPT0%3D--0962914fadf0ecb3dbc0cad91be692032f49a2df;
        path=/; HttpOnly
      - login_user=; path=/
    body:
      encoding: UTF-8
      string: ''
    http_version: 
  recorded_at: Fri, 31 Jul 2015 00:18:00 GMT
- request:
    method: get
    uri: http://localhost:3000/auth/access_token?code=bmo2cGU0bkV2d05vUFdrU2hnV1liUDFJbzdtaS9OeHVhMWZDVDBtVi91UThNYkE4am1vNk5SZDZxNElKczYzRy0tWFE4TkNWa2FMaTJNN3NaU0k4YjByZz09--cc5b0ecb37c2226b5149113c7bd19a9ac7b5d0d8
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/ld+json
      Cookie:
      - _internal_session=azdTVTAwbGkxalJ3TmVGLzMzbTNvekxxTmMvV0NCQ2o0aUduTXB5SmNoMTJSY3pXd0NtNlZUcDM4OGptWW9leTNkbUhYdTJvc2JQa1VlV2lOb3lONkQyanZtSjd4aTlTUVVabXV4clROOXRvcXdRcUdMSGZNQnFsZVk0OHJYT3FzU05sV1ZIb3NKUWk0YmRzOEFjNzlEUUxlS1lxcFNqcnJwNjk3bW9pdWlHTmZkRlQyU2MvWHoycktxNlkwZmxxZ1BEY3oyNHhqczRPcS96c042aUxXVnlZbFMzRE8yYmdsVXNoR25XbWRpNFFncmhXQk5PbE5NV25jZzEvRUlrRGFHTTB4MVRBRmpSdkdaRlNsRS9KaXlyb1lLU0NJeEQzbjdVTjl6ZzFVR0E3NVJQbk1VU2tYVGQwRkVhanJZRHk1SGR0S3hlcEttbGt0dEk2VUNBRjNkSXFEWDNXRkhpUWlhdFpRSEk2WHdTNVlIeFZ5WXhJcG1qYzdSNUEzSDNib1J3dU1MSlpIYnZjU2JBanVTOFFCV0orL0Q1WEYrMUtBS3BLQ0JoT3JGdXIyVHdCSkdSUGVLRjRuWURZSm8weDdVWFQyUmJsWTJVaDB5SkhoYjkvcFdLK1V5TEppcUZOOTI5WVN6ZnFYNTF2TnNWMFU1TGF4UXV2dVkzVnJ2dmVEb3crUENlMXVFY2xSVEV1OHMrVSt0TWRtTk5ZQm9QTEhCRWJRTmllSVM0aHMyU1FSZzNWUnRzRHRaQTlJUXFPLS0rRkY2S0xaQ1Qzd0JqVXVTSnovaXZBPT0%3D--0962914fadf0ecb3dbc0cad91be692032f49a2df;
        login_user=
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - '["application/ld+json"]; charset=utf-8'
      Etag:
      - W/"b0d222b710b3c8e63be8ea2506b35d64"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - c745f22e-9667-41ed-b20b-da81aa782b16
      X-Runtime:
      - '0.321393'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 00:18:00 GMT
      Content-Length:
      - '306'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=TTNabTZPd3ZpVHo2a3lsWVFaUzhQTFRYbVhTck9PbzY0V01aQTVYVHc3U0g1R2hEQldqSmtndG9tZHNQbE10ekxFbXp6dm5XZEV4WG1jVGl4eHJNMEk1NCtTQnBmMWhkbGlRL2c3bXNqUC9UclQzMXFLalNhKzMrZEFxQ0E0R29kMmkwdzVqTllaMWJwVVF5bWtncGQ1NTZqYTFPWmRyNkl5b2paOGMvOVdveTZvNFE4OStZaFZZQ2lsZFZCVjJ5U3UrQ01qSnVNK0YyeFZFS3RHeDNDZWtwbjl4WUwwRk5wcExjSW1HdVFNdkNxOWQvSHdXS2J5aTJJbFNIUit4NkY5V1VQOE9jNFd3TUlYV0dWWWttR1B2WkhuWm9aTGR5QTJaQVo0dHB3eG96N2dvSnZhcUVJdk5RSGQybFNLZXJMNU9QY0ZYY2Z5aU40S3VFUWgwTVNWOWVJRUNIUFZRdEZQK2ZxUTJ2WWY0Z25UenU3bjVNdGRDZXcrSE9IVTM5OEg5N0hNQmZHbHpLQmRTNllKV3lLZk1WdCtKaDBVcEhra3hmVWY3MHN2cVdVT1BDYmZrTVcxRy9NeEU1YXJGRnBDcTdpY0ZNN21TZTFxRFRLdTNvYXY3dFVHSEkwTDJJNmNMVkk2Ukd1cnNqakIwanZad003Q1ZnZjZVa1ppNWc1RDRBZEpQTTkzNkUwaHBJR0xiV0FkKzRxaG9abU1iZmxmUGNOd2hZWHpuWXFhY3dtYmNram9DTVlTdFlHcTJLUittQzBDN0xuaFZRL3RjL1FoQWhCa2JzWlkxQldoTWNpQ3dGRkM3VUlYM3ZKeTZ5UXlZTTRJUmoyNm1IM2VkVkFwdDVoeXNrV3pvT3lONWVzOU40MmtjY29YWkVXNEhwRGpXTnQwcDA2WStUd2t1T2wwaTl4RVZRU3Z5b2xKOVphMmljOExJNFZEWFlVakY1K0dJRG8yY0NsWlgzeTBNU1p4Q25VNUdwd2wwbHZRZFZKalZFM2tLdjFrNXd0d1hWeDJoZTNKL2psRHhlWFpEUHorYmFjSkZjdElKaEVuNTQ1QytnYU8vQ2YwOW5ESGMrOXNNeDU1a3VtUSttTEQyNVc0aEdTdEhFSjNncktDcC9yWFpnN1YzZzZMM215UXJWS0crK1BXNDFyV1lidkY0RmhMY0pRSHBIQ2FnQlM5YTBmMU8rUWxMVEFJZGhscFducDdkWG5MZFJvZHRBeWh1eGJIQXE3UU9mdFlWT1E5Wk1VZ2pBN3laakowdDV2dEhVRlBGSjF4eHhNamFkMGpFRURvYS9QSVMwM25WQmdrYWtjd1NKSGFJNGFHOD0tLUdNc3k5TjdFVllWVzdsaTBMT082Wnc9PQ%3D%3D--c1d13ed7767f7afedb1cb27fdc3dbba3eb48145c;
        path=/; HttpOnly
      - login_user=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000
    body:
      encoding: UTF-8
      string: '{"accessToken":"MU9HNFU5NWd0Vmp1T3laNDAydThFcTUrQ0tXNzYxMEs4QUJRQ1UvQmdRTGR3Z21TaWRnWHBvSFZPZ3l0VVU3OG50ZUxxbEZQYVo0UGRzckJnL1dGUXNhVUNibFBSNSsxbWtxZVZGVUprUjlVbVljSlNPTTh2OFRlUzFnR29XcEgtLWsza2VDQklLeENPMndBY05rU2EySHc9PQ==--211f1d23e47b4be3e1ba0124d56b9a439257d98f","tokenType":"Bearer","expiresIn":3600}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 00:18:00 GMT
recorded_with: VCR 2.9.3
