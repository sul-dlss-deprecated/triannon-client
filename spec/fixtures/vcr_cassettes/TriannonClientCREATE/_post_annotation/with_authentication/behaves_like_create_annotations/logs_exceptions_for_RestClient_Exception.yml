---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/auth/client_identity
    body:
      encoding: UTF-8
      string: '{"clientId":"clientA","clientSecret":"secretA"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"8e45a212562e572f908450da74ae0b60"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 88250123-2dce-47e6-a920-90db42caaf84
      X-Runtime:
      - '0.161841'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 23:57:44 GMT
      Content-Length:
      - '186'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=dnh2NWVmekxCNjB4bTVJb2x1d0tPTWJqYUtEUWgxbGFkSmlnNDZTY01ZMjJIcDhYaEx4Yk1qQnpBeEhCcUNIZDM0RHBTR2pPTUpGdGhCNzBqbjZJZnZzUE9jWVFQTEJQd05oWFMyZ1ZyMzFXU3NlQ3liRmZPejV1RmtidlFBVlV4MUhmTXZBZk8va1g3Q2RpSmMyd3VBMGsvL2pKTzc3RlAxRVhickM4OERwL3drQVhPZzJSTnNRaGs0MHhOUzcvL2h2Q2x1SWQrVXhmN20yQjhSbnpSWEd4RjZ5aG1RUmkyUWlWYldWZDk5RGlCemdFekVReXNhRUkvTjA4TlhnTlVCU1phSHNtaTBobDR1N2NGWGhGRHpsYVo5UDJTQ1RkVWJUN3MvbEUrdCs1eVBHelRGMmFIRzYzZkMzVDRVd3VYKy9ZN0ZXem90SHYyT1lXYXM1RW5iakgxVzhTbGdCVkRZcHhESkdIblVCcnlzcDNKVkpCcXhxNEZ3MElSYlR5bE84SllqWUhmdGdyRS9ZY2xUbkpDS1h3Vkw3V1J4NFdiU0M0cTBqSFk2cmNqUTd1TDFZY29pU0FDY1BxdXlIallFekdOd0xMbUZacDNrK0ErWG16Qmt1ODkxWWxMcU42WFFCdDZzK0RPb2M9LS1ZeWQ4TlJyalYvKzZiVTd1QVBKSnhBPT0%3D--a5cc70fa162809b4e1710650a9896402a48071e8;
        path=/; HttpOnly
      - request_method=POST; path=/
    body:
      encoding: UTF-8
      string: '{"authorizationCode":"b1A2NDFtVnNtaGk0NGJKRU1TZWxGbERjMFZtMGx5ZE55Wm1icDFIV0U2eFYxYllqeFJNNDdYaS9TaTFDQXpGSC0tNmVnNkZxK2FPZitXZndNZUpLZTR3UT09--aafcad2b88feb0b6f41d16161ff1cb68ce938e29"}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 23:57:44 GMT
- request:
    method: post
    uri: http://localhost:3000/auth/login?code=b1A2NDFtVnNtaGk0NGJKRU1TZWxGbERjMFZtMGx5ZE55Wm1icDFIV0U2eFYxYllqeFJNNDdYaS9TaTFDQXpGSC0tNmVnNkZxK2FPZitXZndNZUpLZTR3UT09--aafcad2b88feb0b6f41d16161ff1cb68ce938e29
    body:
      encoding: UTF-8
      string: '{"userId":"","workgroups":"org:wg-A, org:wg-B"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Cookie:
      - _internal_session=dnh2NWVmekxCNjB4bTVJb2x1d0tPTWJqYUtEUWgxbGFkSmlnNDZTY01ZMjJIcDhYaEx4Yk1qQnpBeEhCcUNIZDM0RHBTR2pPTUpGdGhCNzBqbjZJZnZzUE9jWVFQTEJQd05oWFMyZ1ZyMzFXU3NlQ3liRmZPejV1RmtidlFBVlV4MUhmTXZBZk8va1g3Q2RpSmMyd3VBMGsvL2pKTzc3RlAxRVhickM4OERwL3drQVhPZzJSTnNRaGs0MHhOUzcvL2h2Q2x1SWQrVXhmN20yQjhSbnpSWEd4RjZ5aG1RUmkyUWlWYldWZDk5RGlCemdFekVReXNhRUkvTjA4TlhnTlVCU1phSHNtaTBobDR1N2NGWGhGRHpsYVo5UDJTQ1RkVWJUN3MvbEUrdCs1eVBHelRGMmFIRzYzZkMzVDRVd3VYKy9ZN0ZXem90SHYyT1lXYXM1RW5iakgxVzhTbGdCVkRZcHhESkdIblVCcnlzcDNKVkpCcXhxNEZ3MElSYlR5bE84SllqWUhmdGdyRS9ZY2xUbkpDS1h3Vkw3V1J4NFdiU0M0cTBqSFk2cmNqUTd1TDFZY29pU0FDY1BxdXlIallFekdOd0xMbUZacDNrK0ErWG16Qmt1ODkxWWxMcU42WFFCdDZzK0RPb2M9LS1ZeWQ4TlJyalYvKzZiVTd1QVBKSnhBPT0%3D--a5cc70fa162809b4e1710650a9896402a48071e8;
        request_method=POST
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - text/plain; charset=utf-8
      Cache-Control:
      - no-cache
      X-Request-Id:
      - ad4dec0c-0b4e-4247-8540-3f771746ee69
      X-Runtime:
      - '0.160063'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 23:57:44 GMT
      Content-Length:
      - '0'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=ais5MG5GQlhibE5DekE5QTQ3a2FPL2RPckMyR3pMZnhaSk50RDlrbjh3alF4SVBGL01DUEFJa0xOdWptcmhrZWRIWUhJSXZuWlBqTExUK21uN0EwckhZQ2NzS2JZcVcwN0o2QmpubUZTYm9yK014V1hzSmxEL1p1eEVEaEFnbDMzZWJnQ1AvNkVjRmtFQWY5VkdSMjVad2tqZDVuU1NJS1JNNjJsbU90TUZUQmd3bHg4R2gzUlZVMCtWa3VtSld4MW9uSzVCMGhIMmxNMjNxVXZ5Yit0ckpQYnhQNUFEWHpaZWxMUFZ5TE1weHg2bFgrZGgvTTFUdFFubFNGR2pveDZFbnBQNjhyalg4Y0N5bGZRcVk1TExBR2RRc3dkRHRzVFcrT0tsem9NNTZ3a1NsQ1pxK0RGV2pqa3JsZjkrT29OamRqRHh4Y2U5YkNTN2FGbnd6Q0ZSZmU3VVgySVZuYjFudW1ZUWxQcWNqdGttaDRBektkT2NCNTdkK0FEQ0lZYUpXOVhSdmVVTlhIN01QUEk1MEh2V21sZFQ4cnZpRG96Yi8wQVY2eitWMmlnNmhEZnZZbkcrTEFXMmI3eVpiWjBhMkg2MlJaQTI2U055aWNYbEYwbVprTjNsRjRMdXcxQ2paa0RybWtyeW4yRGNidE5RSHM4b3RFeldibERoUzR6MXkybUhzYTVnYUlhVFAxeTdUay9qTkFhNU1rR2NESEptQ09sdnBvMW5vd1pIZ0g0OW1iZnlHQ1FxYWhiL2Q5LS0yZnZVdTlIdmd6Nlh6cnVIbWJILzhRPT0%3D--62c93eafac06a68f6dea0df02589df01a90b8715;
        path=/; HttpOnly
      - login_user=; path=/
    body:
      encoding: UTF-8
      string: ''
    http_version: 
  recorded_at: Fri, 31 Jul 2015 23:57:44 GMT
- request:
    method: get
    uri: http://localhost:3000/auth/access_token?code=b1A2NDFtVnNtaGk0NGJKRU1TZWxGbERjMFZtMGx5ZE55Wm1icDFIV0U2eFYxYllqeFJNNDdYaS9TaTFDQXpGSC0tNmVnNkZxK2FPZitXZndNZUpLZTR3UT09--aafcad2b88feb0b6f41d16161ff1cb68ce938e29
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/ld+json
      Cookie:
      - _internal_session=ais5MG5GQlhibE5DekE5QTQ3a2FPL2RPckMyR3pMZnhaSk50RDlrbjh3alF4SVBGL01DUEFJa0xOdWptcmhrZWRIWUhJSXZuWlBqTExUK21uN0EwckhZQ2NzS2JZcVcwN0o2QmpubUZTYm9yK014V1hzSmxEL1p1eEVEaEFnbDMzZWJnQ1AvNkVjRmtFQWY5VkdSMjVad2tqZDVuU1NJS1JNNjJsbU90TUZUQmd3bHg4R2gzUlZVMCtWa3VtSld4MW9uSzVCMGhIMmxNMjNxVXZ5Yit0ckpQYnhQNUFEWHpaZWxMUFZ5TE1weHg2bFgrZGgvTTFUdFFubFNGR2pveDZFbnBQNjhyalg4Y0N5bGZRcVk1TExBR2RRc3dkRHRzVFcrT0tsem9NNTZ3a1NsQ1pxK0RGV2pqa3JsZjkrT29OamRqRHh4Y2U5YkNTN2FGbnd6Q0ZSZmU3VVgySVZuYjFudW1ZUWxQcWNqdGttaDRBektkT2NCNTdkK0FEQ0lZYUpXOVhSdmVVTlhIN01QUEk1MEh2V21sZFQ4cnZpRG96Yi8wQVY2eitWMmlnNmhEZnZZbkcrTEFXMmI3eVpiWjBhMkg2MlJaQTI2U055aWNYbEYwbVprTjNsRjRMdXcxQ2paa0RybWtyeW4yRGNidE5RSHM4b3RFeldibERoUzR6MXkybUhzYTVnYUlhVFAxeTdUay9qTkFhNU1rR2NESEptQ09sdnBvMW5vd1pIZ0g0OW1iZnlHQ1FxYWhiL2Q5LS0yZnZVdTlIdmd6Nlh6cnVIbWJILzhRPT0%3D--62c93eafac06a68f6dea0df02589df01a90b8715;
        login_user=
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - '["application/ld+json"]; charset=utf-8'
      Etag:
      - W/"270e0db66b733404b2f7d575130ecf96"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - bcd24066-d668-45c9-8eec-895befcdb8e3
      X-Runtime:
      - '0.321144'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 23:57:44 GMT
      Content-Length:
      - '306'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=dUUrMFRhcXBQMEJBeDdoMC95cHE2TTA3eHV3LzdjbndSTUVLSFU1Zmw3bnVyV3lTT0JPZDdLR3U3bnZwL1JOOGlVQ3VFblNDeUlyMjR5dmgwR01jZXc1SWhPV05uT2p0NmxLa3RiYXBoM2VsaEsyZTNNa2o2NW90L1lBUEwwak1jL1JEa0txY09kamltRXl1STFFT1VhSUQ4Tjk5QU4wQkdpNnBCLzZoZE5EbUhuMGNJU3pNbU1nQ0VuM3IvYnZ1aDJuUG1LdVNlVUVPTks0c29GeUJ6RWJjUnJoZjB3VUM1ZUZ4M3d4T0Qzck00Zk9JdHROcGdoQzFxMUZaNy9oRjBWSWRSUDd4YnhJa2d2ajFIRzN2RytZNGltTDZ2OWJiQmpVVnR4VitNSGhCalhCcGtMMkhlYXA4WjgzNVNuWVNSM0t6RHFNOXdtR1NiSEl3Q2FCTTJueEFRcWJ1UmF1TFVLUFgzZklnOTFXUzVMM0JEaUhjNTA3bnp2M2ZISWFVQlk3SGpSNUlxd2M1YzA3M0RYeHJiWFk4dTVYdlNJdzRNN2hFOEszR2lxbXVNSDlKTDFNVE81T0VJdFlpUmY2eW5hSHVrZmJ3TFo5K3p3eHFKc2pWVHgyUVhsemFFL290a1lyNEN3RVZWclRIUExtMjlNOFF0ZVlHOFhkNXdKZUhuckJWbWhlb0d0SnVtZEpTQzU0Rm90UWN2cEVjM1g2QkNhQVp3aEpka2UzV2czblppMTk4T3VUV1p3b1J0UytPYmZYYXh2Q1ZlUzdLQlhLbDlUZ1NqTWZQMmMvUVZKeTU0dEpJU05HN1ZXeEd0UDg5MmJKMjUvd1NocEVwSW1kMUR3WnRlOXBORTVYUkQvdUk0NGtyMmZ5aDBzQndoaHA4alE5OWZ1ZmdKc3ZyL3lyRUI5ZnA4K25MZG5nSytmVjhYdmlHOHZEUllSVWhmbEtNTWVZbmZiOURzcVNzdkZYVzROT1RaZXRsZThxbS9KTTRYQUUwYS9nckJtSnRnZHFMbVlIZUIydWkzK2c0WTBoQmpTc0hzRTBnQTRRTEF4RTNHVkNzblVQMWlUR1FQMTVSSHYvUUI1K0JOdG5mNlF1bUdsejMyRjZGK0tSV3hod3FMUDJsaUxYOTNxems5K2J0em8vbFpseG03aFp1WElvWElOVndMM3pEVXh0OHpzOEFHc0R2VDl6Yy9udXFCbUpVaWE1aGM1RGVXaFVSMk1wSnZPUkgydjBmbHhpQWxhc21nZlJINUNLNEdpbXlYMjltLzhDTU54U3lEN2hTWXZZVm9DdTlHQXhHU29vb3Z1NnBOZzh5RmkxejVTVT0tLVRsZVBFaUVrUmthdGlON3NicUZlYnc9PQ%3D%3D--5198ed5e30cce27d667ec6bb4bedb527e3acbf8c;
        path=/; HttpOnly
      - login_user=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000
    body:
      encoding: UTF-8
      string: '{"accessToken":"d2ZpOHZQa1QyeCs0YU1McG5FODc4dEFiLzNsNlF0RnRkREtSNWZrcFgxQjZLWVJvWE5sM2RMNjJER2xVWXg1N0E0NUIwZlhCSndRTHJmVkw2RWRPZ0hYV3o5SFlMYTU1N0NqOU0wbE5Vb3RGUWFNbFUxU0R1TWhueVY0TzVJU2otLTZqS2l1dlVmMWpRUUkxbFo2ZGhMdkE9PQ==--7cdb5e469e424220913f83b7b66015d732713f68","tokenType":"Bearer","expiresIn":3600}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 23:57:44 GMT
recorded_with: VCR 2.9.3
