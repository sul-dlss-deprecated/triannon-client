---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/auth/client_identity
    body:
      encoding: UTF-8
      string: '{"clientId":"clientA","clientSecret":"secretA"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"4fb0d2324c9ea732ce6a4d93800b0d7a"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 7d4968eb-ca98-48ae-8691-aacb8dfaeb00
      X-Runtime:
      - '0.165511'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 23:57:46 GMT
      Content-Length:
      - '186'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=anJTb2NUUHZ5SDJXRHAyRXJRaFVseUFUL0tpclhvNzlPbWRTOXNoQ21DS2RpWjd6L1BqajRNYTRwSlJNT2ZFb1drc3RIRXE1NjZlaWNYOVArK0lGeUllVS94NDY5STlJdURmUWhFOHNudVptK3F5OXhDYzh5dmRuaGdiYjd3TE01cFFFampRdlpDRUVnL1Rnd1ZKUEQ5MU9nQ0R4ZjhFWlhRcVVKZFJNWWFxMzV3R0VqWmJDUHJ5SnpSbWV4aTZUTnQ0RUk3cFFCbzkxeXJFbkRZR1lCVWVVMlc3UGpwK056OG5QVlliREMyaGJvanQrVkdNcXc4K3JvREFJZlZaQnlTenlzMXNxT0U4dFc5REN4ZW1Oc0Z1V0NSUkViQlZPUkJEZVV3RU9BbXpoYVIrT2ZZUjUzb3FkNmU1RlhUVC9LTE1UZW10d0hwTUM0Q2sxOUloMm9RVUpEa0VZRlJZbFRQdi9JWmoweEZQbVc5aXVxTEgrb2NjeWhibXFaVnRhdWk3RVNic3c3dC9zR0lNREMwcVZ0WEQxcmVSSTJZVW5oRjVkYy9OU2ZBcHVHUDI3SHBvZXUrb3NOTm14VDFPZGtTV3YzQUhUOStwWEtpVUpBUWFxSjZmYnp4YmtrMmE4Z0dQVzlxOVhTZWM9LS1PMDlXM2w0Q3E2bDR2L0p6a3ZMeDJ3PT0%3D--9ee1ab5b85a783db2b1d3be759487eb43080a37e;
        path=/; HttpOnly
      - request_method=POST; path=/
    body:
      encoding: UTF-8
      string: '{"authorizationCode":"am5hUHN0OUsyVTdoRHM5ZlZEcGEwUUllejRPbGVrczNHOERvcjlKZHVJODdBRUxxcFk2b3N2VnlxR1RPSDlmNS0tcGs0RHB1MzhQWC9nOUNoc1Rvd1dqQT09--eb746bad6aa20e7ab075638ecda78f16bdf51148"}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 23:57:46 GMT
- request:
    method: post
    uri: http://localhost:3000/auth/login?code=am5hUHN0OUsyVTdoRHM5ZlZEcGEwUUllejRPbGVrczNHOERvcjlKZHVJODdBRUxxcFk2b3N2VnlxR1RPSDlmNS0tcGs0RHB1MzhQWC9nOUNoc1Rvd1dqQT09--eb746bad6aa20e7ab075638ecda78f16bdf51148
    body:
      encoding: UTF-8
      string: '{"userId":"","workgroups":"org:wg-A, org:wg-B"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/json
      Cookie:
      - _internal_session=anJTb2NUUHZ5SDJXRHAyRXJRaFVseUFUL0tpclhvNzlPbWRTOXNoQ21DS2RpWjd6L1BqajRNYTRwSlJNT2ZFb1drc3RIRXE1NjZlaWNYOVArK0lGeUllVS94NDY5STlJdURmUWhFOHNudVptK3F5OXhDYzh5dmRuaGdiYjd3TE01cFFFampRdlpDRUVnL1Rnd1ZKUEQ5MU9nQ0R4ZjhFWlhRcVVKZFJNWWFxMzV3R0VqWmJDUHJ5SnpSbWV4aTZUTnQ0RUk3cFFCbzkxeXJFbkRZR1lCVWVVMlc3UGpwK056OG5QVlliREMyaGJvanQrVkdNcXc4K3JvREFJZlZaQnlTenlzMXNxT0U4dFc5REN4ZW1Oc0Z1V0NSUkViQlZPUkJEZVV3RU9BbXpoYVIrT2ZZUjUzb3FkNmU1RlhUVC9LTE1UZW10d0hwTUM0Q2sxOUloMm9RVUpEa0VZRlJZbFRQdi9JWmoweEZQbVc5aXVxTEgrb2NjeWhibXFaVnRhdWk3RVNic3c3dC9zR0lNREMwcVZ0WEQxcmVSSTJZVW5oRjVkYy9OU2ZBcHVHUDI3SHBvZXUrb3NOTm14VDFPZGtTV3YzQUhUOStwWEtpVUpBUWFxSjZmYnp4YmtrMmE4Z0dQVzlxOVhTZWM9LS1PMDlXM2w0Q3E2bDR2L0p6a3ZMeDJ3PT0%3D--9ee1ab5b85a783db2b1d3be759487eb43080a37e;
        request_method=POST
      Content-Length:
      - '47'
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - text/plain; charset=utf-8
      Cache-Control:
      - no-cache
      X-Request-Id:
      - c0d0292a-7a0e-4125-bbd2-43380ccad257
      X-Runtime:
      - '0.159382'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 23:57:46 GMT
      Content-Length:
      - '0'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=dFl3eEplZFRyWEJ3U3c3QjJlN2ZHKy9kcFB1YWdIZXU1d3RWamRrTUtPekN4REc5MUdJRFkrOUdHNWErekZyM1RYcHJZMGZEMURQS1NERlFEN0ZUY3hWTTRkWVAxZWdFRnhyR2orWGZLcDlNREFMV2hLZ1FSQjhyaFBPcEMxK1kwZFFSWm94OXZiemozQTlra1FSTUptek9FTThva3djMy9yYnNTZFBvelU4aDZVT2hTWUl4U3FRUmRrb1p0RUZLa2g3YWt6VDhOUGh3WGNvZUEzZDFLa0IvSCtWNEhJbXNRQVJ5ZVYrTWZOSE9QUmtPc0RITVJ2RUZydXRuTUUzYWd6d1JmL0hqSlNqOURnYzZ5eThZMW15ZmFTMnpDTTFCcTA4ZlJaNVpudDRCdnUvTnZ3cjZwTWxiUndwOU1ITS9RczZGTGZFMmZ5Rm5BekxmdUFHTXMwNFRFeEdoNENIckJBcWUzTWVsWU1ySGNpRitxeWNXWm9rWVdpZmdyTE9iYkpXQ2Q3Q2sxSnpMQVlEcnlOdXZUMmw0OEpLY01iK3crRFI2NVM3RGRocnZxaW1yRk9rTWdkVTBENDZHQzZQTlZQVE1ZQS9QcWlHbnJWTjl3cVkvSWFScFZKbXpkOE1pQ1FJbGZZdEI1aEZKaHJJanRqaG96WXFXMTdZc1dFTmRtYmxnOGRJU2ZDTENGTHVCUTBDTU9hS2hiZHVBRHdXQXY5YlZzT2cvdFE0UG02U2lYOExpMlE1REhZK3FGbUU3LS1EcnU2ZkczckQ0UFhKVysxeUZ4ZUh3PT0%3D--2d4ebe4267a94e26424808f326225d17464577be;
        path=/; HttpOnly
      - login_user=; path=/
    body:
      encoding: UTF-8
      string: ''
    http_version: 
  recorded_at: Fri, 31 Jul 2015 23:57:46 GMT
- request:
    method: get
    uri: http://localhost:3000/auth/access_token?code=am5hUHN0OUsyVTdoRHM5ZlZEcGEwUUllejRPbGVrczNHOERvcjlKZHVJODdBRUxxcFk2b3N2VnlxR1RPSDlmNS0tcGs0RHB1MzhQWC9nOUNoc1Rvd1dqQT09--eb746bad6aa20e7ab075638ecda78f16bdf51148
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/ld+json
      Accept-Encoding:
      - gzip, deflate
      Content-Type:
      - application/ld+json
      Cookie:
      - _internal_session=dFl3eEplZFRyWEJ3U3c3QjJlN2ZHKy9kcFB1YWdIZXU1d3RWamRrTUtPekN4REc5MUdJRFkrOUdHNWErekZyM1RYcHJZMGZEMURQS1NERlFEN0ZUY3hWTTRkWVAxZWdFRnhyR2orWGZLcDlNREFMV2hLZ1FSQjhyaFBPcEMxK1kwZFFSWm94OXZiemozQTlra1FSTUptek9FTThva3djMy9yYnNTZFBvelU4aDZVT2hTWUl4U3FRUmRrb1p0RUZLa2g3YWt6VDhOUGh3WGNvZUEzZDFLa0IvSCtWNEhJbXNRQVJ5ZVYrTWZOSE9QUmtPc0RITVJ2RUZydXRuTUUzYWd6d1JmL0hqSlNqOURnYzZ5eThZMW15ZmFTMnpDTTFCcTA4ZlJaNVpudDRCdnUvTnZ3cjZwTWxiUndwOU1ITS9RczZGTGZFMmZ5Rm5BekxmdUFHTXMwNFRFeEdoNENIckJBcWUzTWVsWU1ySGNpRitxeWNXWm9rWVdpZmdyTE9iYkpXQ2Q3Q2sxSnpMQVlEcnlOdXZUMmw0OEpLY01iK3crRFI2NVM3RGRocnZxaW1yRk9rTWdkVTBENDZHQzZQTlZQVE1ZQS9QcWlHbnJWTjl3cVkvSWFScFZKbXpkOE1pQ1FJbGZZdEI1aEZKaHJJanRqaG96WXFXMTdZc1dFTmRtYmxnOGRJU2ZDTENGTHVCUTBDTU9hS2hiZHVBRHdXQXY5YlZzT2cvdFE0UG02U2lYOExpMlE1REhZK3FGbUU3LS1EcnU2ZkczckQ0UFhKVysxeUZ4ZUh3PT0%3D--2d4ebe4267a94e26424808f326225d17464577be;
        login_user=
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: 'OK '
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - '["application/ld+json"]; charset=utf-8'
      Etag:
      - W/"69142b739ab6674291bdf651d2f85d0b"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 16b9de64-835e-4892-beab-8a65e32e537e
      X-Runtime:
      - '0.317828'
      Server:
      - WEBrick/1.3.1 (Ruby/2.2.2/2015-04-13)
      Date:
      - Fri, 31 Jul 2015 23:57:46 GMT
      Content-Length:
      - '306'
      Connection:
      - Keep-Alive
      Set-Cookie:
      - _internal_session=UC90SkJCRnJrc1dmUnh3UjZ1K081YUFEQjRlRDBPY1UrUzJqbnExdkFrTmg3a3VXdlc2TFIrTFpBK2IzMGc4Y0lJUUc1N0prQm1MRVN1VGFPLzZPeEJROVE1c3hsRXNVZjlXUzJWQnNyZDE4QkpEZ2hXNDRPSnV4ZzNrSFQyOVErVkJTdHpJN2Y3dFdxUXB3Z1IvU3daK0ZtcTM4aHRHbmdkQWIvZ1NNUWg0ZjFRSG1md2E4MUhPTXZwVHgzcTFHV2RVditlWlNzbzM5TmZlMFBvblRTQ2x2S2lxRzFpNHh1WXpXRnV4d0tYeXk2K1NDVXA1clhLQVRMZUFwZHhmL3EySkdyODVXMG1KM25ScXNBQ3l0NkR1Y2VsK1ZQSmdlK3lDSnFYZ3dEbC8xdnFLM3RZblBPREhuVFN2cGFCRmVxNFY5eUYrUUVkKzE4VzY4SWZQZzZ3ZTBUYXFCVWJDbi9YOFlhTXhZUngxZWxwcFZZQ0dOMFpFd25TemV5TEdxZjg2cHRoaEpNUjFxRGtEK2M0Q2NlSnhsaDFzQWxwdy9iQnVqVlpCcjREVExLYWFBczVreStqT3RXcXh2ZHoyQ0hqVG1MZ242eU5NZE1qeFVESlB2akxGcGRVbEp1aDI3SkhrbHNlRW9EM0ZzYzQzR2k4R3JlR3FtTkV2VFhBUUVwRTVmUm1sSkxtYUkveGpKTTQxNU9GWlNtY01uZk83MzlCMCswcFRxTCt2L1RjdURVWUY3QWJEZ0dINEZGS1Eyd0o1bzgxazF1TjVFTGpwU3hTU3cwNUhOelB6Nis1enl6dWw2VURKS2RYaWpSQmhMUUlaTEVSTldLT1B0ekpMRUozUkRLdkVJVU8zU0FrK3U4MHNXajNMT1BScFRmWnp0b1pVRTVhSzRoc0xsUWg4QjZMTGxkdlhWa1NobU5iNWhKOElwdEI4S0NwK00yQ2FmYmxrRmtWakxqRk12ZHQ0WXJCTW1tZTQwbi9maG1kaGh5UnRTZVBKaGpOSy9GWmZORzBWSjJrUUVmVXp0WWZuYUtFQk9URmpaelN0WHltRDdJajlKZHdpTHNOaHdCTS9WVkcwVmFyVnZVamR4VVErb1h5bHZ0dFcvYjlwd0N0VlVIM2JJZ3N4Z1NUd1JsQWFGWG5wcjBVU29JVjA0YnZ1RWk5S0U2RWlDNVdYdE1Ja2dEK3ZNZ1h2c3hTeTJtWExVdElTUHkwYW5hYWxJM2Z0ZWxOY3ppRHVkM2ROUWFxNkJ6cURwbGl5d2ZHUUtKamgrT1pNYjh5blZrcXljL2FVYlcvaSsrRkhwd3R1N1lxdHdMaHJPOFR0emR3cz0tLXpUTUZqMS9Mbk82a28wejBSaWRvYVE9PQ%3D%3D--4ecbdc51a341de9bf9e38c48d281e7521a92d50b;
        path=/; HttpOnly
      - login_user=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000
    body:
      encoding: UTF-8
      string: '{"accessToken":"ODVOK3p1bFVwRWxvMStUU0NtMWFRZEVSVWtsY0lBTTVUZEtmSWRZc05NNG9YVEFGeGZNUE5sWlBDNGp6ZlE0T2dHWEthYU9XRE0yR2gyTnJBbHJXdGZUN1RCV3U2UFlKZzdQbVllbDJtM0ZVbXBPUG91cVBxMEE3cGl5S3U1TlItLS9raUN2eHd6UHFUU2l5U0J0RXJONVE9PQ==--20f2d50e475a6cc7ea0ba931ff04aa6f3cac656a","tokenType":"Bearer","expiresIn":3600}'
    http_version: 
  recorded_at: Fri, 31 Jul 2015 23:57:46 GMT
recorded_with: VCR 2.9.3
